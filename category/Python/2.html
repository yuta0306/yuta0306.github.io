<!DOCTYPE html><html lang="ja" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="HandheldFriendly" content="True"/><title>ゆうぼうの書跡棚</title><meta name="description" content="スキルや知識をつけて将来ナマケモノになるまでの技術ブログです．主に，データ分析関連やPython, JavaScriptによる開発についてまとめます．"/><meta name="author" content="ゆうぼう"/><meta property="og:title" content="ゆうぼうの書跡棚"/><meta property="og:type" content="website"/><meta property="og:url" content="https://yuta0306.github.io"/><meta property="og:image" content=""/><meta property="og:site_name" content="ゆうぼうの書跡棚"/><meta property="og:description" content="スキルや知識をつけて将来ナマケモノになるまでの技術ブログです．主に，データ分析関連やPython, JavaScriptによる開発についてまとめます．"/><meta name="twitter:card" content="summary_large_image"/><meta name="robots" content="index, follow"/><meta name="generator" content="Next.js"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon_io/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon_io/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon_io/favicon-16x16.png"/><link rel="manifest" href="/favicon_io/site.webmanifest"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-147997959-2"></script><script>
                  window.dataLayer = window.dataLayer || [];
                  function gtag(){dataLayer.push(arguments);}
                  gtag('js', new Date());
                  gtag('config', 'UA-147997959-2', {
                    page_path: window.location.pathname,
                  });</script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>「Python」2ページ目 | ゆうぼうの書跡棚</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/a4c206307c77d03b145a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a4c206307c77d03b145a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/92a4c59b852cf32b4601.css" as="style"/><link rel="stylesheet" href="/_next/static/css/92a4c59b852cf32b4601.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-049bc3bbf79e0795c2ba.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-1490dc09f6cde4fcb29b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons-6a9f4cf7ad7bdfa7813f.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-bbcf2247cff69dcfdd57.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-86bfdbf99940ef7548f7.js" as="script"/><link rel="preload" href="/_next/static/chunks/996-b8c21bef3804147ecb4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/211-bcdca227a7c3439a9648.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/category/%5Bcategory%5D/%5Bpage%5D-d190d442db39c0e2ad07.js" as="script"/></head><body><div id="__next"><div class="header_container__3KxYs"><div class="header_container__inner__yjsY5"><header class="header_header__2L2uC"><a href="/"><h1 class="header_header__title__2PM5D">ゆうぼうの書跡棚</h1></a></header><div class="header_hamburger__2m01s"><div><img src="/icons/hamburger.png"/></div></div><nav class="header_nav__closed__1Q-5G"><ul class="header_nav__list__1evri"><li class="header_nav__item__3FLhh"><a href="/about">About</a></li><li class="header_nav__item_active__2oXbU"><a href="/">Blog</a></li><li class="header_nav__item__3FLhh"><a href="https://docs.google.com/forms/d/e/1FAIpQLSdgyok9pi697ZJvVizRNEw0qghDWz517k1FrbcRmfvvERlraA/viewform">Contact</a></li></ul></nav></div></div><div class="header_category__3K26U"><ul class="header_category__items__1jOIE"><a class="header_category__item__9QajB" href="/category/Web/1"><li>Web</li></a><a class="header_category__item__9QajB" href="/category/JavaScript/1"><li>JavaScript</li></a><a class="header_category__item__9QajB" href="/category/Competition/1"><li>Competition</li></a><a class="header_category__item__9QajB" href="/category/Cloud/1"><li>Cloud</li></a><a class="header_category__item__9QajB" href="/category/Linux/1"><li>Linux</li></a><a class="header_category__item__9QajB" href="/category/Python/1"><li>Python</li></a><a class="header_category__item__9QajB" href="/category/ML/1"><li>ML</li></a><a class="header_category__item__9QajB" href="/category/Go/1"><li>Go</li></a><a class="header_category__item__9QajB" href="/category/SQL/1"><li>SQL</li></a></ul></div><div class="main_main__EJIDe"><div class="main_main__container__2mPxL"><main class="main_main__container__inner__76cC6" role="main" itemProp="mainContentOfPage" itemscope="" itemType="http://schema.org/Blog"><div class="main_content__grid__2j5sZ"><div class="card_card__container__1HXVB"><a href="/py-trans-matrix"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/python.jpg" alt="簡単に転置行列求めてみた" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-10-12" itemProp="published">2020-10-12</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">簡単に転置行列求めてみた</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/py-class-repr"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/python.jpg" alt="classの標準出力を特殊な文字列にしたい【__str__|__repr__】" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-10-12" itemProp="published">2020-10-12</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">classの標準出力を特殊な文字列にしたい【__str__|__repr__】</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/tk-entry-default"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/python.jpg" alt="【Python】tkinterでEntryにデフォルト値を入れたい" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-10-07" itemProp="published">2020-10-07</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">【Python】tkinterでEntryにデフォルト値を入れたい</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/selenium-click-by-js"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/python.jpg" alt="Seleniumからクリックができない...そうだ、JSからクリックしよう" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-09-26" itemProp="published">2020-09-26</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">Seleniumからクリックができない...そうだ、JSからクリックしよう</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/parse-int-base10"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/python.jpg" alt="invalid literal for int() with base 10: でint型のパースでエラーが！ " class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-09-11" itemProp="published">2020-09-11</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">invalid literal for int() with base 10: でint型のパースでエラーが！ </h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/pandas-nomodule"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/python.jpg" alt="pickleでロードした時pandasがあるのに&quot;No module ~~&quot;で悩んだ件について" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-09-10" itemProp="published">2020-09-10</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">pickleでロードした時pandasがあるのに&quot;No module ~~&quot;で悩んだ件について</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/python-add-path"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/python.jpg" alt="自作のモジュールを他のディレクトリから持ってきたい!!" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-09-03" itemProp="published">2020-09-03</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">自作のモジュールを他のディレクトリから持ってきたい!!</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/groupfold-groups"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/network.jpg" alt="Scikit-learnのGroupKFoldでgroups配列でWarning発生!!" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-08-18" itemProp="published">2020-08-18</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">Scikit-learnのGroupKFoldでgroups配列でWarning発生!!</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/heroku-mecab"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-08-05" itemProp="published">2020-08-05</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">HerokuにMecCabインストールで困った!!</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/logistic-with-l1"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/network.jpg" alt="ロジスティック回帰でL1正則化を利用できない問題の解決法" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-08-01" itemProp="published">2020-08-01</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">ロジスティック回帰でL1正則化を利用できない問題の解決法</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/prefer-to-make_blobs"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/python.jpg" alt="scikit-learnのmake_blobsに乗り換えよう!!" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-07-21" itemProp="published">2020-07-21</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">scikit-learnのmake_blobsに乗り換えよう!!</h2></div></div></a></div><div class="card_card__container__1HXVB"><a href="/show_tables-mysql-python"><div class="card_card__1XHqb"><div class="card_card__thumbnail__3rV6C"><img src="/images/thumbnails/database.jpg" alt="mysql-connector-pythonで&#x27;SHOW ~~~&#x27;に困ったのでその対処法" class="card_card__thumbnail__img__1f8pd" loading="lazy"/></div><div><div class="card_card__meta__3UO09"><time dateTime="2020-07-14" itemProp="published">2020-07-14</time><a itemscope="" role="author" itemType="http://schema.org/Person" href="/about"><span itemProp="name">ゆうぼう</span></a></div><h2 class="card_card__title__26MYL">mysql-connector-pythonで&#x27;SHOW ~~~&#x27;に困ったのでその対処法</h2></div></div></a></div><div class="paginager_container__3j3Qx"><ul class="paginager_container__pagers__1oXIX"><a class="paginager_container__pager__268RS" href="/category/Python/1"><li class="paginager_container__pager__page__3c5sS">&lt;&lt;</li></a><a class="paginager_container__pager__268RS" href="/category/Python/1"><li class="paginager_container__pager__page__3c5sS">&lt;</li></a><a class="paginager_container__pager__268RS" href="/category/Python/1"><li class="paginager_container__pager__page__3c5sS">1</li></a><li class="paginager_container__pager_active__Fm_0T">2</li><a class="paginager_container__pager__268RS" href="/category/Python/3"><li class="paginager_container__pager__page__3c5sS">3</li></a><a class="paginager_container__pager__268RS" href="/category/Python/3"><li class="paginager_container__pager__page__3c5sS">&gt;</li></a><a class="paginager_container__pager__268RS" href="/category/Python/3"><li class="paginager_container__pager__page__3c5sS">&gt;&gt;</li></a></ul></div></div></main><aside class="main_sidebar__2Zhb0"><div class="shortbio_container__11Rzx" itemscope="" itemProp="author" itemType="http://schema.org/Person"><div class="shortbio_container__image__38jvW"><img src="/images/profile.jpeg" alt="ゆうぼう" loading="lazy"/></div><h3 class="shortbio_author__ZbrSN" itemscope="" itemProp="name">ゆうぼう</h3><p class="shortbio_container__paragraph__2Sxgf"></p><p class="shortbio_container__paragraph__2Sxgf">地方国立大学B3のナマケモノです．</p><p class="shortbio_container__paragraph__2Sxgf">最近は機械学習にお熱です．</p><p class="shortbio_container__paragraph__2Sxgf">好きな技術は，FlaskとPytorchです．このブログはNext.jsで書いていて，Next.jsもハマりつつあります．</p><p class="shortbio_container__paragraph__2Sxgf"></p><p class="shortbio_container__paragraph__2Sxgf">スクレイピングが大好きなので，依頼があれば是非．</p><p class="shortbio_container__paragraph__2Sxgf">またKaggle等のデータ分析コンペも一緒に楽しみたいです．</p><p class="shortbio_container__paragraph__2Sxgf"></p></div><div class="followme_container__3qQyP"><h3 class="followme_container__header__1IBfE">Follow Me</h3><div class="followme_container__links__3SmDO"><a target="_blank" href="https://github.com/yuta0306"><img src="/icons/github.png" alt="GitHub"/></a><a target="_blank" href="https://kaggle.com/yutasasaki"><img src="/icons/kaggle.png" alt="Kaggle"/></a><a target="_blank" href="https://twitter.com/Sloth65557166"><img src="/icons/twitter.png" alt="Twitter"/></a></div></div><div class="categories_container__XA7T4"><h3 class="categories_container__header__1HMsA">Categories</h3><div class="categories_container__links__2_sET"><a class="categories_container__link__3wXMA" href="/category/Web/1">Web</a><a class="categories_container__link__3wXMA" href="/category/JavaScript/1">JavaScript</a><a class="categories_container__link__3wXMA" href="/category/Competition/1">Competition</a><a class="categories_container__link__3wXMA" href="/category/Cloud/1">Cloud</a><a class="categories_container__link__3wXMA" href="/category/Linux/1">Linux</a><a class="categories_container__link__3wXMA" href="/category/Python/1">Python</a><a class="categories_container__link__3wXMA" href="/category/ML/1">ML</a><a class="categories_container__link__3wXMA" href="/category/Go/1">Go</a><a class="categories_container__link__3wXMA" href="/category/SQL/1">SQL</a></div></div><div class="tags_container__2j2ju"><h3 class="tags_container__header__3imWv">Tags</h3><div class="tags_container__links__3WNOQ"><a class="tags_container__link__3DgcP" href="/tag/Apache/1">Apache</a><a class="tags_container__link__3DgcP" href="/tag/Appium/1">Appium</a><a class="tags_container__link__3DgcP" href="/tag/atmaCup/1">atmaCup</a><a class="tags_container__link__3DgcP" href="/tag/AWS/1">AWS</a><a class="tags_container__link__3DgcP" href="/tag/CentOS7/1">CentOS7</a><a class="tags_container__link__3DgcP" href="/tag/conda/1">conda</a><a class="tags_container__link__3DgcP" href="/tag/CSS/1">CSS</a><a class="tags_container__link__3DgcP" href="/tag/Flask/1">Flask</a><a class="tags_container__link__3DgcP" href="/tag/Go/1">Go</a><a class="tags_container__link__3DgcP" href="/tag/HTML/1">HTML</a><a class="tags_container__link__3DgcP" href="/tag/JavaScript/1">JavaScript</a><a class="tags_container__link__3DgcP" href="/tag/JSON/1">JSON</a><a class="tags_container__link__3DgcP" href="/tag/Mac/1">Mac</a><a class="tags_container__link__3DgcP" href="/tag/make/1">make</a><a class="tags_container__link__3DgcP" href="/tag/map/1">map</a><a class="tags_container__link__3DgcP" href="/tag/MeCab/1">MeCab</a><a class="tags_container__link__3DgcP" href="/tag/ML/1">ML</a><a class="tags_container__link__3DgcP" href="/tag/MySQL/1">MySQL</a><a class="tags_container__link__3DgcP" href="/tag/NLP/1">NLP</a><a class="tags_container__link__3DgcP" href="/tag/node.js/1">node.js</a><a class="tags_container__link__3DgcP" href="/tag/Pandas/1">Pandas</a><a class="tags_container__link__3DgcP" href="/tag/Python/1">Python</a><a class="tags_container__link__3DgcP" href="/tag/Scikit-learn/1">Scikit-learn</a><a class="tags_container__link__3DgcP" href="/tag/Selenium/1">Selenium</a><a class="tags_container__link__3DgcP" href="/tag/subprocess/1">subprocess</a><a class="tags_container__link__3DgcP" href="/tag/tensorflow/1">tensorflow</a><a class="tags_container__link__3DgcP" href="/tag/Tkinter/1">Tkinter</a><a class="tags_container__link__3DgcP" href="/tag/zsh/1">zsh</a><a class="tags_container__link__3DgcP" href="/tag/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91/1">オブジェクト指向</a><a class="tags_container__link__3DgcP" href="/tag/%E3%83%87%E3%82%B3%E3%83%AC%E3%83%BC%E3%82%BF/1">デコレータ</a><a class="tags_container__link__3DgcP" href="/tag/%E3%83%87%E3%83%BC%E3%82%BF%E5%88%86%E6%9E%90/1">データ分析</a><a class="tags_container__link__3DgcP" href="/tag/%E7%89%B9%E6%AE%8A%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89/1">特殊メソッド</a></div></div><div id="TOC"></div></aside></div></div><footer class="footer_footer__3LSES"><div class="footer_footer__inner__1CIwJ"><div><a class="footer_footer__link__3Lvn-" href="/privacy-policy">プライバシーポリシー</a></div><div class="footer_footer__title__37duk"><a href="/">ゆうぼうの書跡棚</a></div><div class="footer_footer__small__1-CQk"><small>Powered by <a target="_blank" class="footer_footer__small__link__17tg2" href="https://twitter.com/Sloth65557166">ゆうぼう</a></small></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"CategoricalPostData":[{"contentHtml":"\u003cp\u003e\u003cem\u003epip install tensorflow\u003c/em\u003eでtensorflowをインストールしてディープラーニングをやろうとした矢先の事、パッケージが足りないだと...。その時の解決策がとても簡単だったのですが、この手の問題はtensorflowに限らず起こりそうなので、記録しておきます。\u003c/p\u003e\n\u003ch2\u003e発生したエラー No such file or directory\u003c/h2\u003e\n\u003cp\u003e今回はなぜかインストールに必要なパッケージのメタファイルがなくて、「No such file or directory」と怒られたわけです。\u003c/p\u003e\n\u003cp\u003eそして、今回足りなかったパケージが\u003cstrong\u003egoogle_pasta-0.2.0.dist-info/METADATA\u003c/strong\u003eでした。\u003c/p\u003e\n\u003cp\u003e実際のエラーが以下になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eERROR: Could not install packages due to an EnvironmentError:\n[Errno 2] No such file or directory:\n\u003cspan class=\"hljs-string\"\u003e'/Users/usr/opt/anaconda3/envs/myenv/lib/python3.7/site-packages/google_pasta-0.2.0.dist-info/METADATA'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e【解決策】もうtouchでファイル作っちゃえ!!\u003c/h2\u003e\n\u003cp\u003eよくわからないエラーだし、本当になんでこうなったかの経緯が掴めないのですが、\u003cbr\u003e\nファイルがないとかディレクトリがないとか言っているのでとりあえず\u003cem\u003eもうファイル作っちゃえ!!\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eという事で\u003cstrong\u003etouch\u003c/strong\u003eでファイル作っちゃいます(笑)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ touch /Users/usr/opt/anaconda3/envs/myenv/lib/python3.7/site-packages/google_pasta-0.2.0.dist-info/METADATA\n$ \u003cspan class=\"hljs-comment\"\u003e# 上のファイルパスはエラー文のコピペ\u003c/span\u003e\n$\n$ pip install tensorflow\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eさっきまでのエラーが原因であれば、これでインストールが完了しているはずです!\u003c/p\u003e\n\u003cp\u003eまあ、今回はconda環境で起こった問題なので、何かしらcondaの中でやってはいけないコマンドか何かがあったのかなって感じです。\u003c/p\u003e\n\u003cp\u003eとにかくこのエラーが出たらどうにかなるということで、これからは対処できそうです。\u003c/p\u003e\n\u003cp\u003eクリスマスイヴの投稿でした \\o/\u003cbr\u003e\nそれでは、楽しく機械学習をハックしていきましょう!!\u003c/p\u003e\n","Title":"tensorflowインストール時 METADATAがない？","Date":"2020-12-24","Category":"Python","Tags":["Python","tensorflow"],"Authors":"ゆうぼう","Slug":"tf-install-err","Thumbnail":"/images/thumbnails/python.jpg","Description":"pip install tensorflowでtensorflowをインストールしてディープラーニングをやろうとした矢先の事、パッケージが足りないだと...。その時の解決策がとても簡単だったのですが、この手の問題はtensorflowに限らず起こりそうなので、記録しておきます。","Published":true},{"contentHtml":"\u003cp\u003e今回は、\u003cstrong\u003e多次元配列で*演算には注意しないと、バグが起こるよ\u003c/strong\u003eってことを話します。1年Pythonを描き続けましたが知らなかったので、これは共有させていただきますね。Pythonは、ポインタだの参照だのを意識しなくても良い言語だと思うんですが、これは知っておくべきです。\u003c/p\u003e\n\u003ch2\u003e実験方法\u003c/h2\u003e\n\u003cp\u003e各配列がどの参照をしているかを注目してみましょう。今回の実験は、以下の流れをとります。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e2次元配列を定義 \u0026#x3C;- 様々な方法をとります\u003c/li\u003e\n\u003cli\u003e中の配列の0番目append(0)をする\u003c/li\u003e\n\u003cli\u003e実験結果の確認\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eそれでは早速実験です。対話モードにて行います。\u003c/p\u003e\n\u003ch2\u003eシンプルに定義\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el = [[], [], []]\n\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].append(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\n\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el\n\n[[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e], [], []]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれはおそらく考えていた通りですね。問題なし。\u003c/p\u003e\n\u003ch2\u003e+演算で定義\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el = [[]] + [[]] + [[]]\n\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].append(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\n\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el\n\n[[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e], [], []]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれも想定した通り。問題なし。\u003c/p\u003e\n\u003ch2\u003e*演算で定義\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el = [[]] * \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].append(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\n\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003el\n\n[[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e], [\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e], [\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e......ん？？？？\u003c/p\u003e\n\u003cp\u003e全ての要素配列に0が足してありますね...これは知らんかったやつ...\u003c/p\u003e\n\u003ch2\u003e*演算に注意!!!\u003c/h2\u003e\n\u003cp\u003e*演算で配列を定義する際には注意しましょう。\u003c/p\u003e\n\u003cp\u003eシンプルに定義した場合や+によって定義した配列は、それぞれの配列は別のものとして定義されています。\u003c/p\u003e\n\u003cp\u003eしかし、*によって定義されたものは、演算対象となった配列の参照そのものさえもコピーされて作られてしまいます。\u003c/p\u003e\n\u003cp\u003eまとまった挙動を示して欲しいのであれば問題ないですが、大きなくくりの配列にある要素配列に対しては別々に動いて欲しい場合はかなり注意が必要です。\u003c/p\u003e\n\u003cp\u003eこのことを知っておくだけでもバグが出た時に冷静に対処できると思うので、ぜひ覚えておきましょう。\u003c/p\u003e\n","Title":"【Python】多次元の不用意な*演算には注意!!","Date":"2020-11-27","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"mul-list-ref","Thumbnail":"/images/thumbnails/python.jpg","Description":"今回は、多次元配列で\\*演算には注意しないと、バグが起こるよってことを話します。1年Pythonを描き続けましたが知らなかったので、これは共有させていただきますね。Pythonは、ポインタだの参照だのを意識しなくても良い言語だと思うんですが、これは知っておくべきです。","Published":true},{"contentHtml":"\u003cp\u003ePythonで他にはない特殊な書き方といえば、\u003cstrong\u003e内包表記\u003c/strong\u003eですかね。Haskellでもかけるみたいな話聞いたことあるけど。実際内包表記は読みやすく、たいてい高速に動くので推奨される書き方と思います。ベンチマークを測ってみたので参考になればと。\u003c/p\u003e\n\u003ch2\u003e今回のコード\u003c/h2\u003e\n\u003cp\u003e今回速さを測るための指標となるコードは以下になります。\u003c/p\u003e\n\u003cp\u003e至ってシンプルなforループが以下です。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esymbols = \u003cspan class=\"hljs-string\"\u003e'$¢£¥€¤'\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003enon_ascii\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ec\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e c \u003e \u003cspan class=\"hljs-number\"\u003e127\u003c/span\u003e\ncodes = []\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e s \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e symbols:\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eord\u003c/span\u003e(s) \u003e \u003cspan class=\"hljs-number\"\u003e127\u003c/span\u003e:\n        codes.append(\u003cspan class=\"hljs-built_in\"\u003eord\u003c/span\u003e(s))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれを下に複数の書き方に対して処理速度を測ります。\u003c/p\u003e\n\u003ch2\u003eいざ実験\u003c/h2\u003e\n\u003cp\u003e今回試すものが以下になります。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eただのforループ\u003c/li\u003e\n\u003cli\u003e内包表記\u003c/li\u003e\n\u003cli\u003e内包表記 + 自作関数(non_adcii)\u003c/li\u003e\n\u003cli\u003efilter + lambda\u003c/li\u003e\n\u003cli\u003efilter + 自作関数(non_ascii)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eこれらに関して測ってみます。\nコードが以下になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e timeit\nTIMES = \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e\nSETUP = \u003cspan class=\"hljs-string\"\u003e\"\"\"\nsymbols = '$¢£¥€¤'\ndef non_ascii(c):\n    return c \u003e 127\n\"\"\"\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eclock\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003elabel, cmd\u003c/span\u003e):\u003c/span\u003e\n    res = timeit.repeat(cmd, setup=SETUP, number=TIMES)\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(label, *(\u003cspan class=\"hljs-string\"\u003e'{:.3f}'\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(x) \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e x \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e res))\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    clock(\u003cspan class=\"hljs-string\"\u003e'for-loop        :'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'codes = []\\nfor s in symbols:\\n\\tif ord(s) \u003e 127: codes.append(ord(s))\\ncodes'\u003c/span\u003e)\n    clock(\u003cspan class=\"hljs-string\"\u003e'listcomp        :'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'[ord(s) for s in symbols if ord(s) \u003e 127]'\u003c/span\u003e)\n    clock(\u003cspan class=\"hljs-string\"\u003e'listcomp + func :'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'[ord(s) for s in symbols if non_ascii(ord(s))]'\u003c/span\u003e)\n    clock(\u003cspan class=\"hljs-string\"\u003e'filter + lambda :'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'list(filter(lambda c: c \u003e 127, map(ord, symbols)))'\u003c/span\u003e)\n    clock(\u003cspan class=\"hljs-string\"\u003e'filter + func   :'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'list(filter(non_ascii, map(ord, symbols)))'\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれらから得られる結果がこんな感じです。(人による)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003efor-loop        : 0.009 0.009 0.009 0.009 0.009\nlistcomp        : 0.008 0.008 0.008 0.008 0.008\nlistcomp + func : 0.012 0.013 0.013 0.012 0.012\nfilter + lambda : 0.011 0.013 0.012 0.011 0.013\nfilter + func   : 0.014 0.014 0.014 0.014 0.013\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれはまだループも小さいので差はありませんが、安定して早く動いているのは\u003cstrong\u003e内包表記\u003c/strong\u003eですね。\u003c/p\u003e\n\u003cp\u003e読みやすく、高速に動くことが多い内包表記でした。実際に導入してみてはいかがでしょか。\u003c/p\u003e\n\u003cp\u003e今回は実験だけ示して終わります〜〜.\u003c/p\u003e\n","Title":"内包表記でパフォーマンスをあげるのだ！","Date":"2020-11-22","Category":"Python","Tags":["Python"],"Author":"ゆうぼう","Slug":"migrate-listcomp","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pythonで他にはない特殊な書き方といえば、内包表記ですかね。Haskellでもかけるみたいな話聞いたことあるけど。実際内包表記は読みやすく、たいてい高速に動くので推奨される書き方と思います。ベンチマークを測ってみたので参考になればと。","Published":true},{"contentHtml":"\u003cp\u003e\u003cstrong\u003ePythonからUNIXコマンドを使いたい\u003c/strong\u003e。そんな時があると思います!(多分滅多にないと思うけど)今回は、「ls」コマンドをPythonスクリプトから実行していこうと思います。\u003c/p\u003e\n\u003ch2\u003esubpocessモジュールを利用\u003c/h2\u003e\n\u003cp\u003e今回の用件を満たすのに必要なのは、「\u003cstrong\u003esubprocessモジュール\u003c/strong\u003e」になります。Python3.5から*subprocess.run()*というメソッドでサブプロセスをつなげて、コマンドを走らせるという方法が推奨されているみたい...\u003c/p\u003e\n\u003cp\u003eos.systemとかos.spawn*の代用だそうですね\u003c/p\u003e\n\u003cp\u003eというわけで、\u003cstrong\u003esubprocessモジュール\u003c/strong\u003eを使用していきます。\u003c/p\u003e\n\u003cp\u003eインポートはそのままです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e subprocess\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003esubprocess.run()で実際に走らせる\u003c/h2\u003e\n\u003cp\u003eそれでは早速「ls」コマンドを走らせてみましょう。(実行結果はディレクトリ構造に依存するので、人により異なります)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e subprocess\n\nres = subprocess.\u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003efunction\u003c/span\u003e\"\u003e\u003cspan class=\"hljs-title\"\u003erun\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    [\u003cspan class=\"hljs-string\"\u003e'ls'\u003c/span\u003e]\n\u003c/span\u003e)\n\n\u003cspan class=\"hljs-title\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eres\u003c/span\u003e)\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこの実行結果は以下になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eCompletedProcess(args=[\u003cspan class=\"hljs-string\"\u003e'ls'\u003c/span\u003e], returncode=0)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e特段注意すべきは、コマンドをリスト又はタプルで入力することでしょうか。基本的にスペースを入れることはできません。引数やフラグを足す際に、スペースが必要ならば、リストやタプルにカンマ(,)で区切りましょう。\u003c/p\u003e\n\u003cp\u003eと言いますか...ん？？\u003c/p\u003e\n\u003cp\u003eディレクトリ群出てこないんですけど...\u003cbr\u003e\nというのも、あくまで返ってくるのは\u003cstrong\u003esubprocess.CompletedProcess\u003c/strong\u003eクラスだからですね。\u003c/p\u003e\n\u003ch2\u003eCompletedProcessをいじってみる\u003c/h2\u003e\n\u003cp\u003e実行出来たはずなのに、結果が帰って来ないようじゃ意味がないので中身を開けていきましょう。\u003c/p\u003e\n\u003cp\u003eCompletedProcessクラスには以下のメソッドや変数が存在しています。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e.args\u003c/li\u003e\n\u003cli\u003e.returncode\u003c/li\u003e\n\u003cli\u003e.stdout\u003c/li\u003e\n\u003cli\u003e.check_returncode()\u003c/li\u003e\n\u003cli\u003e.stderr\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eこれから先のチェックは、さきのプログラムの続き。returnされたものは\u003cem\u003eres\u003c/em\u003eに入っている。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(res.args)\n\u003cspan class=\"hljs-comment\"\u003e# \u003e\u003e\u003e ['ls']\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(res.returncode)\n\u003cspan class=\"hljs-comment\"\u003e# \u003e\u003e\u003e 0\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(res.stdout)\n\u003cspan class=\"hljs-comment\"\u003e# \u003e\u003e\u003e None\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(res.stderr)\n\u003cspan class=\"hljs-comment\"\u003e# \u003e\u003e\u003e None\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eという結果に...\u003c/p\u003e\n\u003cp\u003eプログラムが期待通り終了した場合、0が返ってきます。\u003c/p\u003e\n\u003cp\u003eただ、標準出力、標準エラーには\u003cem\u003eNone\u003c/em\u003eが返ってきていますね。どこにも結果がないのだけど...\u003c/p\u003e\n\u003ch2\u003e実行結果をみる!!\u003c/h2\u003e\n\u003cp\u003e実は、subprocess.run()には、出力をキャプチャする引数があったみたいです。それが\u003cstrong\u003ecapture_output\u003c/strong\u003e。これをTrueにすると出力が保存されます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e subprocess\n\nres = subprocess.\u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003efunction\u003c/span\u003e\"\u003e\u003cspan class=\"hljs-title\"\u003erun\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e[\u003cspan class=\"hljs-string\"\u003e'ls'\u003c/span\u003e], capture_output=\u003cspan class=\"hljs-literal\"\u003eTrue\u003c/span\u003e\u003c/span\u003e)\n\n\u003cspan class=\"hljs-title\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eres\u003c/span\u003e)\n# \u003e\u003e\u003e \u003cspan class=\"hljs-title\"\u003eCompletedProcess\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eargs=[\u003cspan class=\"hljs-string\"\u003e'ls'\u003c/span\u003e], returncode=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\nstdout=\u003cspan class=\"hljs-string\"\u003eb'Applications\\nLibrary\\nSystem\\nUsers\\nVolumes\\nbin\\ncores\\ndev\\netc\\nhome\\nopt\\nprivate\\nsbin\\ntmp\\nusr\\nvar\\n'\u003c/span\u003e,\nstderr=\u003cspan class=\"hljs-string\"\u003eb''\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで出力をみることができました。\u003c/p\u003e\n\u003cp\u003e他にもコマンドを使うことができるので、必要に応じてsubprocessモジュールを使ってみてください。\u003c/p\u003e\n\u003cp\u003e今回はこれにて終了！\u003c/p\u003e\n\u003c/section\u003e\n","Title":"PythonからUNIXコマンド発出【ls編】","Date":"2020-11-10","Category":"Python","Tags":["Python","subprocess"],"Authors":"ゆうぼう","Slug":"ls-python","Thumbnail":"/images/thumbnails/python.jpg","Description":"PythonからUNIXコマンドを使いたい。そんな時があると思います!(多分滅多にないと思うけど)今回は、「ls」コマンドをPythonスクリプトから実行していこうと思います。","Published":true},{"contentHtml":"\u003cp\u003eFlaskからJSONを返してAPIサーバー風に稼働させていたのですが、なぜかfetchしたJavaScript側でエラーが...なんだこれとなったのですが、バックエンドのPython側のミスでした。何気に気付きにくかったりするので、またミスしたときのために備忘録として残しておきます。\u003c/p\u003e\n\u003cp\u003e今回の環境がこちら\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePython-3.8.6\u003c/li\u003e\n\u003cli\u003eFlask\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eエラー内容\u003c/h2\u003e\n\u003cp\u003e今回起きたエラーがこちらです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eSyntaxError: Unexpected token o \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e JSON at position 1\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e予期せぬトークンが頭文字にあったらしいです。なんだこれ...\u003cbr\u003e\n他の場所では特にエラーなかったのになぜここだけ...\u003c/p\u003e\n\u003cp\u003ePythonの方を確認してみます。\u003c/p\u003e\n\u003ch2\u003ePythonのミス\u003c/h2\u003e\n\u003cp\u003e単にPythonのミスでした。ミスの部分だけピックアップします。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e@app.route(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e'/test'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etest\u003c/span\u003e():\u003c/span\u003e\n    obj = {\n        \u003cspan class=\"hljs-string\"\u003e'foo'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'bar'\u003c/span\u003e,\n    }\n    \n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e jsonify(obj)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e何気にわかりにくいんです。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003ejson.dumps()してなかった\u003c/strong\u003e......\u003c/p\u003e\n\u003cp\u003eめっちゃくだらないミスで萎えますねこれ。\u003c/p\u003e\n\u003cp\u003eというわけで、\u003cem\u003ereturn jsonify\u003c/em\u003eする前にしっかりdictをjsonにダンプしておきます。\u003c/p\u003e\n\u003cp\u003e改良版が以下。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e@app.route(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e'/test'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etest\u003c/span\u003e():\u003c/span\u003e\n    obj = {\n        \u003cspan class=\"hljs-string\"\u003e'foo'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'bar'\u003c/span\u003e,\n    }\n    \n    obj = json.dumps(obj)\n    \n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e jsonify(obj) \u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれでもう、フロント側ではエラー起こさせません!!!!\u003c/p\u003e\n\u003cp\u003e簡単に直るけど、気付きにくいってやつです。Flask使ってJSONで通信するときは、フロント側でエラーが出たら、JSONを送っているバックエンドも確認すると良いでしょう。\u003c/p\u003e\n\u003cp\u003e今回はこれだけです!\u003c/p\u003e\n","Title":"【Flask】フロントでUnexpected token!?","Date":"2020-11-08","Category":"Python","Tags":["Python","JSON","Flask"],"Authors":"ゆうぼう","Slug":"flask-json-parse-err","Thumbnail":"/images/thumbnails/python.jpg","Description":"FlaskからJSONを返してAPIサーバー風に稼働させていたのですが、なぜかfetchしたJavaScript側でエラーが...なんだこれとなったのですが、バックエンドのPython側のミスでした。何気に気付きにくかったりするので、またミスしたときのために備忘録として残しておきます。","Published":true},{"contentHtml":"\u003cp\u003eAnacondaは、GUIで操作ができてやりやすいですが、起動もかなりおそくCLIでどうにかならないか\u003cstrong\u003econda create\u003c/strong\u003eコマンドを使って環境を立てる事があります。しかし、ノリでEnterを押してしまってPythonのバージョンを指定し忘れることが...。かなりの弊害を生み出します。その際の対処法を共有します。\u003c/p\u003e\n\u003ch2\u003eCLIでconda環境を作る方法\u003c/h2\u003e\n\u003cp\u003eまずは、CLIで環境を作るコマンドの紹介です。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003econda create -n your-env-name python=3.x\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eたったこれだけで環境を建てられます。\u003c/p\u003e\n\u003ch2\u003eあ、やってしまった...python=3.x忘れた\u003c/h2\u003e\n\u003cp\u003e僕がノリでガガガってコマンド打って最後にやり忘れるやつです。\u003c/p\u003e\n\u003cp\u003e押してから気付くのです...\u003cbr\u003e\nあ、やってしまった...python=3.xって打つの忘れた...と\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003econda create -n your-env-name\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれやっちゃうとすごく焦るんですよね。なんでかっていうとですね\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e(base)$ conda create -n typo\n(base)$ conda activate typo\n(typo)$ pip list\nTraceback (most recent call last):\n  File \u003cspan class=\"hljs-string\"\u003e\"/usr/local/bin/pip\"\u003c/span\u003e, line 6, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u0026#x3C;module\u003e\n    from pip._internal.cli.main import main\nModuleNotFoundError: No module named \u003cspan class=\"hljs-string\"\u003e'pip._internal.cli.main'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003epipがない\u003c/em\u003e...だと...!?\u003c/p\u003e\n\u003cp\u003eこれは困りました。。。しかもこの環境でやると、そこまで自分好みにカスタマイズしていない方は\u003cem\u003epython2\u003c/em\u003eがデフォになっていると思います。\u003c/p\u003e\n\u003cp\u003eいやぁ困った。\u003c/p\u003e\n\u003ch2\u003e【解決策】condaにPythonをインストール\u003c/h2\u003e\n\u003cp\u003econdaに\u003cem\u003ePythonのバージョンを明示した上で\u003c/em\u003eインストールすればうまくいきます！！！\u003c/p\u003e\n\u003cp\u003e今回は、現状でAnacondaが対応している最新版の\u003cem\u003ePython3.8\u003c/em\u003eをインストールします。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e(typo)$ conda install python==3.8\nCollecting package metadata (current_repodata.json): \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\nSolving environment: failed with initial frozen solve. Retrying with flexible solve.\nCollecting package metadata (repodata.json): \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\nSolving environment: \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e## Package Plan ##\u003c/span\u003e\n\n  environment location: /Users/slothyubo/opt/anaconda3/envs/blog-tweet\n\n  added / updated specs:\n    - python==3.8\n\n\nThe following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    certifi-2020.6.20          |     pyhd3eb1b0_3         155 KB\n    libffi-3.2.1               |    h0a44026_1007          43 KB\n    python-3.8.0               |       h359304d_2        18.8 MB\n    ------------------------------------------------------------\n                                           Total:        19.0 MB\n\nThe following NEW packages will be INSTALLED:\n\n  ca-certificates    pkgs/main/osx-64::ca-certificates-2020.10.14-0\n  certifi            pkgs/main/noarch::certifi-2020.6.20-pyhd3eb1b0_3\n  libcxx             pkgs/main/osx-64::libcxx-10.0.0-1\n  libedit            pkgs/main/osx-64::libedit-3.1.20191231-h1de35cc_1\n  libffi             pkgs/main/osx-64::libffi-3.2.1-h0a44026_1007\n  ncurses            pkgs/main/osx-64::ncurses-6.2-h0a44026_1\n  openssl            pkgs/main/osx-64::openssl-1.1.1h-haf1e3a3_0\n  pip                pkgs/main/osx-64::pip-20.2.4-py38_0\n  python             pkgs/main/osx-64::python-3.8.0-h359304d_2\n  readline           pkgs/main/osx-64::readline-7.0-h1de35cc_5\n  setuptools         pkgs/main/osx-64::setuptools-50.3.0-py38h0dc7051_1\n  sqlite             pkgs/main/osx-64::sqlite-3.33.0-hffcf06c_0\n  tk                 pkgs/main/osx-64::tk-8.6.10-hb0a8c7a_0\n  wheel              pkgs/main/noarch::wheel-0.35.1-py_0\n  xz                 pkgs/main/osx-64::xz-5.2.5-h1de35cc_0\n  zlib               pkgs/main/osx-64::zlib-1.2.11-h1de35cc_3\n\n\nProceed ([y]/n)? y  \u003cspan class=\"hljs-comment\"\u003e# \u0026#x3C;== yでEnter\u003c/span\u003e\n\nDownloading and Extracting Packages\npython-3.8.0         | 18.8 MB   | \u003cspan class=\"hljs-comment\"\u003e######################################################### | 100% \u003c/span\u003e\nlibffi-3.2.1         | 43 KB     | \u003cspan class=\"hljs-comment\"\u003e######################################################### | 100% \u003c/span\u003e\ncertifi-2020.6.20    | 155 KB    | \u003cspan class=\"hljs-comment\"\u003e######################################################### | 100% \u003c/span\u003e\nPreparing transaction: \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\nVerifying transaction: \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\nExecuting transaction: \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこのようになり、インストールされました。\u003c/p\u003e\n\u003cp\u003eまた途中でpipも同時にインストールされており、これで無事にpipもインストールされるようになりました！\u003c/p\u003e\n\u003cp\u003e確認\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e(typo)$ pip --version\npip 20.0.2 from /Users/user/opt/anaconda3/envs/static-site/lib/python3.7/site-packages/pip (python 3.7)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上記は人によりますが、しっかりpipが使えますね\u003c/p\u003e\n\u003cp\u003eそれでは、もし\u003cstrong\u003econda create\u003c/strong\u003eでPythonのバージョンを書き忘れたら、これで解決しましょう！\u003c/p\u003e\n","Title":"conda createでpythonのバージョン指定忘れた！","Date":"2020-11-01","Category":"Python","Tags":["Python","conda"],"Authors":"ゆうぼう","Slug":"conda-miss-pythonv","Thumbnail":"/images/thumbnails/python.jpg","Description":"Anacondaは、GUIで操作ができてやりやすいですが、起動もかなりおそくCLIでどうにかならないか「conda create」コマンドを使って環境を立てる事があります。しかし、ノリでEnterを押してしまってPythonのバージョンを指定し忘れることが...。かなりの弊害を生み出します。その際の対処法を共有します。","Published":true},{"contentHtml":"\u003cp\u003ePythonにも\u003cstrong\u003emap関数\u003c/strong\u003eがあり、容易に配列から新たな配列を生み出すことができます。\u003cem\u003elambda\u003c/em\u003eを用いて無名関数を使うなど、いくつか応用方があるので備忘録がてらまとめていこうと思います。\u003c/p\u003e\n\u003cp\u003e簡単のため、\u003cem\u003eある配列の全ての要素の絶対値をとる\u003c/em\u003eスクリプトで試します。\u003c/p\u003e\n\u003ch2\u003emapと無名関数\u003c/h2\u003e\n\u003cp\u003e新たに配列から配列を作るために忘れてはいけないのは、\u003cstrong\u003emapオブジェクトをlistで囲むこと\u003c/strong\u003eです。\u003c/p\u003e\n\u003cp\u003eその点を考慮しつつ、新たな配列を生み出していきます。まずは、無名関数\u003cem\u003elambda\u003c/em\u003eを使います。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ea = [-\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, -\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e]\nto_abs = \u003cspan class=\"hljs-keyword\"\u003elambda\u003c/span\u003e x: \u003cspan class=\"hljs-built_in\"\u003eabs\u003c/span\u003e(x)\n\nb = \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e(to_abs, a))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(b)\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[3, 2, 1, 0, 1, 2, 3]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e無名関数\u003cem\u003eto_abs\u003c/em\u003eにより、渡される各関数の値の絶対値を返します。\u003c/p\u003e\n\u003ch2\u003emapと普段使いの関数\u003c/h2\u003e\n\u003cp\u003e普段通りの関数宣言でも動きます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eto_abs\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eabs\u003c/span\u003e(x)\n    \nc = \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e(to_abs, a))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(c)\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[3, 2, 1, 0, 1, 2, 3]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e普通に動きますが、ここで注意したいのは\u003cstrong\u003emapに渡す関数に直接的に引数を与えないこと\u003c/strong\u003eです。\u003c/p\u003e\n\u003cp\u003eそうすることで難なく動きます。\u003c/p\u003e\n\u003cp\u003e引数を渡してみるとどうなるでしょうか。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eto_abs\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eabs\u003c/span\u003e(x)\n    \nc = \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e(to_abs(x), a))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(c)\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eTraceback (most recent call last):\n  File \u003cspan class=\"hljs-string\"\u003e\"map.py\"\u003c/span\u003e, line 3, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u0026#x3C;module\u003e\n    c = list(map(to_abs(x), a))\nNameError: name \u003cspan class=\"hljs-string\"\u003e'x'\u003c/span\u003e is not defined\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e参照する\u003cem\u003ex\u003c/em\u003eがないのでエラーが発生します。その点だけ注意しましょう。\u003c/p\u003e\n\u003ch2\u003emapでsetに応用\u003c/h2\u003e\n\u003cp\u003esetについても同様に動作します\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ed = \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e(to_abs, a))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(d)\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e{0, 1, 2, 3}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eしっかりと集合として捉えられていますね。\u003c/p\u003e\n\u003cp\u003emapを使ってさせることはそこまで難しくないですが、処理速度的にはおそらく内包表記の方が速いと思われるので場合に合わせて導入するのが良いかもしれません。\u003c/p\u003e\n\u003cp\u003eただ、numpyやpandasでデータ分析をする際は、map関数がそれぞれで与えられていることもあるので、使えるに越したことはないでしょう。\u003c/p\u003e\n","Title":"【map】を使って新たな配列を作る","Date":"2020-10-26","Category":"Python","Tags":["Python","map"],"Authors":"ゆうぼう","Slug":"py-map","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pythonにもmap関数があり、容易に配列から新たな配列を生み出すことができます。lambdaを用いて無名関数を使うなど、いくつか応用方があるので備忘録がてらまとめていこうと思います。","Published":true},{"contentHtml":"\u003cp\u003ePythonには\u003cstrong\u003eデコレータ\u003c/strong\u003eというものがあるのですが、意外と初学者には知られていない存在で比較的不思議な挙動をする感じがします。関数を直接的に実行しなくともファイルを読み込んだ段階で実行されるようなので、挙動について実験してみました。\u003c/p\u003e\n\u003ch2\u003eデコレータ活用例\u003c/h2\u003e\n\u003cp\u003eまずは、デコレータの活用例をお話しします。(Numpyから借用)\u003c/p\u003e\n\u003cp\u003eNumpyにおいては、関数のモジュールを\u003cem\u003enumpy\u003c/em\u003eに変更しており、override.pyか_override.pyだかに\u003cem\u003eset_module\u003c/em\u003e関数が作られていたと思います(ちょっと曖昧)\u003c/p\u003e\n\u003cp\u003e適当な関数を定義してモジュールを変更します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eset_module\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ename\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003edecorator\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\u003c/span\u003e\n        func.__module__ = name\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e func\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e decorator\n    \n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003echeck_module\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(func.__module__)\n    \n\u003cspan class=\"hljs-meta\"\u003e@set_module(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e'mylib'\u003c/span\u003e\u003c/span\u003e)    \u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e# module名書き換え\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003echanged\u003c/span\u003e():\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e\n    \n\u003cspan class=\"hljs-comment\"\u003e# module名変更なし\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003enot_changed\u003c/span\u003e():\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e\n    \n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e'__main__'\u003c/span\u003e:\n    check_module(changed)\n    check_module(not_changed)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e各関数の役割\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eset_module\n\u003cul\u003e\n\u003cli\u003eデコレータ\u003c/li\u003e\n\u003cli\u003e関数のモジュール名を変更する\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003echanged\n\u003cul\u003e\n\u003cli\u003eモジュール名を変更される関数\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003enot_changed\n\u003cul\u003e\n\u003cli\u003eモジュール名を\u003cstrong\u003e変更されない\u003c/strong\u003e関数\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eこれらの実行結果が以下になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003emylib\n__main__\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e変更された方は、期待した通りモジュール名が\u003cem\u003emylib\u003c/em\u003eに変わっていて、変更していない方はメインルーティンに入っていることになっています。\u003c/p\u003e\n\u003ch2\u003eデコレータの挙動を追う\u003c/h2\u003e\n\u003cp\u003eデコレータの挙動を追ってみます。基本的には動作がわかるように関数に機能はつけず、標準出力にて動作を確認していきます。\u003c/p\u003e\n\u003cp\u003e実験するための関数を用意します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003edeco\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ename\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(name, \u003cspan class=\"hljs-string\"\u003e'開始'\u003c/span\u003e)\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003edecorator\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(func.__name__, \u003cspan class=\"hljs-string\"\u003e'実行'\u003c/span\u003e)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e func\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(name, \u003cspan class=\"hljs-string\"\u003e'終了'\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e decorator\n    \n\u003cspan class=\"hljs-meta\"\u003e@deco(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e'deco1'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etest1\u003c/span\u003e():\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e\n    \n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e特別難しいこともありません。ただ各タイミングで出力を待つデコレータです。\u003c/p\u003e\n\u003cp\u003e実行結果が以下になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edeco1 開始\ndeco1 終了\ntest1 実行\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eデコレータの外の関数を動かした後、デコレートされた(装飾された)関数が返されるという感じです。\u003c/p\u003e\n\u003cp\u003e流れは以下になります。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eデコレータの発火\u003c/li\u003e\n\u003cli\u003eデコレータにより関数を装飾\u003c/li\u003e\n\u003cli\u003e装飾された関数が返ってくる\u003c/li\u003e\n\u003cli\u003eあとは3の関数を使うだけ\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eこのような流れになっていきます。デコレータは関数を装飾するものなので、ちょっと特殊であまり使うことがない気もしますが...\u003c/p\u003e\n\u003cp\u003eまた、\u003cstrong\u003eメインルーティンで何も動かしていないのにもかかわらず\u003c/strong\u003e、出力されています。\u003c/p\u003e\n\u003cp\u003eデコレータは読み込んだときに動くようです。その特徴がわかればそこまでデコレータは難しいものでもなさそうです。\u003c/p\u003e\n\u003cp\u003eあとでまた多重デコレータに関する話をしたいと思います。\u003c/p\u003e\n","Title":"Pythonのデコレータの挙動を実験してみた","Date":"2020-10-26","Category":"Python","Tags":["Python","デコレータ"],"Authors":"ゆうぼう","Slug":"decorator-timing","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pythonにはデコレータというものがあるのですが、意外と初学者には知られていない存在で比較的不思議な挙動をする感じがします。関数を直接的に実行しなくともファイルを読み込んだ段階で実行されるようなので、挙動について実験してみました。","Published":true},{"contentHtml":"\u003cp\u003ePythonを使って、例えばコーパスを作る際、辞書型に対して単語出現回数を記録しするなど、辞書を使うことがあるかもしれません。その際、ifによる条件分岐によって辞書型の初期化をするわけですが、collectionsにあるdefaultdictというものを使うと初期化を勝手にやってくれます。そのdefaultdictについて解説していきます。\u003c/p\u003e\n\u003cp\u003e今回は、Wikipediaの「AI」に関するページの一部文章に関して単語出現回数を数えていきます。\u003c/p\u003e\n\u003ch2\u003e文章を単語ごとに分割する\u003c/h2\u003e\n\u003cp\u003eまずは手始めに文章を単語ごとに分割していきます。\u003c/p\u003e\n\u003cp\u003e使用する文章がこちらです。\u003c/p\u003e\n\u003cp\u003eArtificial intelligence (AI), is intelligence demonstrated by machines, unlike the natural intelligence displayed by humans and animals. Leading AI textbooks define the field as the study of \"intelligent agents\": any device that perceives its environment and takes actions that maximize its chance of successfully achieving its goals. Colloquially, the term \"artificial intelligence\" is often used to describe machines (or computers) that mimic \"cognitive\" functions that humans associate with the human mind, such as \"learning\" and \"problem solving\".\u003c/p\u003e\n\u003cp\u003eAs machines become increasingly capable, tasks considered to require \"intelligence\" are often removed from the definition of AI, a phenomenon known as the AI effect. A quip in Tesler's Theorem says \"AI is whatever hasn't been done yet.\" For instance, optical character recognition is frequently excluded from things considered to be AI, having become a routine technology. Modern machine capabilities generally classified as AI include successfully understanding human speech, competing at the highest level in strategic game systems (such as chess and Go), autonomously operating cars, intelligent routing in content delivery networks, and military simulations.\u003c/p\u003e\n\u003cp\u003eArtificial intelligence was founded as an academic discipline in 1955, and in the years since has experienced several waves of optimism, followed by disappointment and the loss of funding (known as an \"AI winter\"), followed by new approaches, success and renewed funding. For most of its history, AI research has been divided into sub-fields that often fail to communicate with each other. These sub-fields are based on technical considerations, such as particular goals (e.g. \"robotics\" or \"machine learning\"), the use of particular tools (\"logic\" or artificial neural networks), or deep philosophical differences. Sub-fields have also been based on social factors (particular institutions or the work of particular researchers).\u003c/p\u003e\n\u003cp\u003eThe traditional problems (or goals) of AI research include reasoning, knowledge representation, planning, learning, natural language processing, perception and the ability to move and manipulate objects. General intelligence is among the field's long-term goals. Approaches include statistical methods, computational intelligence, and traditional symbolic AI. Many tools are used in AI, including versions of search and mathematical optimization, artificial neural networks, and methods based on statistics, probability and economics. The AI field draws upon computer science, information engineering, mathematics, psychology, linguistics, philosophy, and many other fields.\u003c/p\u003e\n\u003cp\u003eThe field was founded on the assumption that human intelligence \"can be so precisely described that a machine can be made to simulate it\". This raises philosophical arguments about the mind and the ethics of creating artificial beings endowed with human-like intelligence. These issues have been explored by myth, fiction and philosophy since antiquity. Some people also consider AI to be a danger to humanity if it progresses unabated. Others believe that AI, unlike previous technological revolutions, will create a risk of mass unemployment.\u003c/p\u003e\n\u003cp\u003eIn the twenty-first century, AI techniques have experienced a resurgence following concurrent advances in computer power, large amounts of data, and theoretical understanding; and AI techniques have become an essential part of the technology industry, helping to solve many challenging problems in computer science, software engineering and operations research.\u003c/p\u003e\n\u003cp\u003eこちらを分割します。\u003c/p\u003e\n\u003cp\u003e\u003cem\u003econtent\u003c/em\u003eという変数に上記の文章が入っていることを想定しています。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e re\nwords = re.split(\u003cspan class=\"hljs-string\"\u003e'[,\\.\"\\(\\)\\s+]'\u003c/span\u003e, content)\nwords = [word \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e word \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e words \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e word==\u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e1行目で「, . \" ( ) 空白」を区切りとして単語分けしています。これで空白が取り切れないので、2行目で空文字になってしまったものを削除します。\u003c/p\u003e\n\u003ch2\u003e初期化をサボってカウントする\u003c/h2\u003e\n\u003cp\u003eそれでは初期化をサボって単語出現回数をカウントしていきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e collections \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e defaultdict\n\nfreq = defaultdict(\u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e word \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e words:\n     freq[word] += \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eたったこれでだけで、ifによる条件分岐なしにカウントができます。結果をみてみてもしっかりカウントされていることがわかります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003ebuiltins\u003c/span\u003e\"\u003e\u003cspan class=\"hljs-title\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efreq\u003c/span\u003e)\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edefaultdict(\u0026#x3C;\\class \u003cspan class=\"hljs-string\"\u003e'int'\u003c/span\u003e\u003e, {\u003cspan class=\"hljs-string\"\u003e'Artificial'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'intelligence'\u003c/span\u003e: 10, \u003cspan class=\"hljs-string\"\u003e'AI'\u003c/span\u003e: 17, \u003cspan class=\"hljs-string\"\u003e'is'\u003c/span\u003e: 5, \u003cspan class=\"hljs-string\"\u003e'demonstrated'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'by'\u003c/span\u003e: 5, \u003cspan class=\"hljs-string\"\u003e'machines'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'unlike'\u003c/span\u003e: 2,\n\u003cspan class=\"hljs-string\"\u003e'the'\u003c/span\u003e: 19, \u003cspan class=\"hljs-string\"\u003e'natural'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'displayed'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'humans'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'and'\u003c/span\u003e: 20, \u003cspan class=\"hljs-string\"\u003e'animals'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'Leading'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'textbooks'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'define'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'field'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'as'\u003c/span\u003e:\n8, \u003cspan class=\"hljs-string\"\u003e'study'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'of'\u003c/span\u003e: 14, \u003cspan class=\"hljs-string\"\u003e'intelligent'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'agents'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e':'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'any'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'device'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'that'\u003c/span\u003e: 8, \u003cspan class=\"hljs-string\"\u003e'perceives'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'its'\u003c/span\u003e: 4, \u003cspan class=\"hljs-string\"\u003e'environment'\u003c/span\u003e:\n1, \u003cspan class=\"hljs-string\"\u003e'takes'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'actions'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'maximize'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'chance'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'successfully'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'achieving'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'goals'\u003c/span\u003e: 4, \u003cspan class=\"hljs-string\"\u003e'Colloquially'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'term'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'artificial'\u003c/span\u003e: 4, \u003cspan class=\"hljs-string\"\u003e'often'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'used'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'to'\u003c/span\u003e: 9, \u003cspan class=\"hljs-string\"\u003e'describe'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'or'\u003c/span\u003e: 6, \u003cspan class=\"hljs-string\"\u003e'computers'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'mimic'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'cognitive'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'functions'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'associate'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'with'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'human'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'mind'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'such'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'learning'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'problem'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'solving'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'As'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'become'\u003c/span\u003e: 3,\n\u003cspan class=\"hljs-string\"\u003e'increasingly'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'capable'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'tasks'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'considered'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'require'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'are'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'removed'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'from'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'definition'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'a'\u003c/span\u003e:\n6, \u003cspan class=\"hljs-string\"\u003e'phenomenon'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'known'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'effect'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'A'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'quip'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'in'\u003c/span\u003e: 8, \u003cspan class=\"hljs-string\"\u003e\"Tesler's\"\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'Theorem'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'says'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'whatever'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e\"hasn't\"\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'been'\u003c/span\u003e: 4, \u003cspan class=\"hljs-string\"\u003e'done'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'yet'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'For'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'instance'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'optical'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'character'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'recognition'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'frequently'\u003c/span\u003e:\n1, \u003cspan class=\"hljs-string\"\u003e'excluded'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'things'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'be'\u003c/span\u003e: 4, \u003cspan class=\"hljs-string\"\u003e'having'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'routine'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'technology'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'Modern'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'machine'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'capabilities'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'generally'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'classified'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'include'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'understanding'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'speech'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'competing'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'at'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'highest'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'level'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'strategic'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'game'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'systems'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'chess'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'Go'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'autonomously'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'operating'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'cars'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'routing'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'content'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'delivery'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'networks'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'military'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'simulations'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'was'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'founded'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'an'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'academic'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'discipline'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'1955'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'years'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'since'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'has'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'experienced'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'several'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'waves'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'optimism'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'followed'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'disappointment'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'loss'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'funding'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'winter'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'new'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'approaches'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'success'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'renewed'\u003c/span\u003e:\n1, \u003cspan class=\"hljs-string\"\u003e'most'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'history'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'research'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'divided'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'into'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'sub-fields'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'fail'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'communicate'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'each'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'other'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'These'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'based'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'on'\u003c/span\u003e: 4, \u003cspan class=\"hljs-string\"\u003e'technical'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'considerations'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'particular'\u003c/span\u003e: 4, \u003cspan class=\"hljs-string\"\u003e'e'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'g'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'robotics'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'use'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'tools'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'logic'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'neural'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'deep'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'philosophical'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'differences'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'Sub-fields'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'have'\u003c/span\u003e: 4, \u003cspan class=\"hljs-string\"\u003e'also'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'social'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'factors'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'institutions'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'work'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'researchers'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'The'\u003c/span\u003e:\n3, \u003cspan class=\"hljs-string\"\u003e'traditional'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'problems'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'reasoning'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'knowledge'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'representation'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'planning'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'language'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'processing'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'perception'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'ability'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'move'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'manipulate'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'objects'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'General'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'among'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e\"field's\"\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'long-term'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'Approaches'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'statistical'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'methods'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'computational'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'symbolic'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'Many'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'including'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'versions'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'search'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'mathematical'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'optimization'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'statistics'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'probability'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'economics'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'draws'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'upon'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'computer'\u003c/span\u003e: 3, \u003cspan class=\"hljs-string\"\u003e'science'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'information'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'engineering'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'mathematics'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'psychology'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'linguistics'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'philosophy'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'many'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'fields'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'assumption'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'can'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'so'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'precisely'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'described'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'made'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'simulate'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'it'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'This'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'raises'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'arguments'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'about'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'ethics'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'creating'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'beings'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'endowed'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'human-like'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'issues'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'explored'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'myth'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'fiction'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'antiquity'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'Some'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'people'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'consider'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'danger'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'humanity'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'if'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'progresses'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'unabated'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'Others'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'believe'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'previous'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'technological'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'revolutions'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'will'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'create'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'risk'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'mass'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'unemployment'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'In'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'twenty-first'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'century'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'techniques'\u003c/span\u003e: 2, \u003cspan class=\"hljs-string\"\u003e'resurgence'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'following'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'concurrent'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'advances'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'power'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'large'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'amounts'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'data'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'theoretical'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'understanding;'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'essential'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'part'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'industry'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'helping'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'solve'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'challenging'\u003c/span\u003e: 1, \u003cspan class=\"hljs-string\"\u003e'software'\u003c/span\u003e: 1,\n\u003cspan class=\"hljs-string\"\u003e'operations'\u003c/span\u003e: 1})\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで簡単に単語数カウントができます。\u003c/p\u003e\n\u003cp\u003e今回は単語数カウントを題材にしましたが、違う初期化方法を指定してあげれば他のことも可能になりますで試してみては。\u003c/p\u003e\n","Title":"【defaultdict】で辞書型の初期化をサボる","Date":"2020-10-19","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"defaultdict-usage","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pythonを使って、例えばコーパスを作る際、辞書型に対して単語出現回数を記録しするなど、辞書を使うことがあるかもしれません。その際、ifによる条件分岐によって辞書型の初期化をするわけですが、collectionsにあるdefaultdictというものを使うと初期化を勝手にやってくれます。そのdefaultdictについて解説していきます。","Published":true},{"contentHtml":"\u003cp\u003ePythonで中身をpopで削除したいなーと思った時、なぜか「\u003cem\u003edictionary changed size during iteration\u003c/em\u003e」とのメッセージが。これは意外と出てきたら原因がパッとしないので、2度と同じことを起こさないように記録しておきます。\u003c/p\u003e\n\u003ch2\u003e直感的にイテレーションしてpopしていく\u003c/h2\u003e\n\u003cp\u003eここでは、直感的に初心者が思いつきそうな感じのイテレーションを用いてループを回し、popで辞書を消していきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edictionary = {\n    \u003cspan class=\"hljs-string\"\u003e'a'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e'b'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e'c'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\n}\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e key \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e dictionary.keys():\n    dictionary.pop(key)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e結果はこんな感じに...\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eTraceback (most recent call last):\n  File \u003cspan class=\"hljs-string\"\u003e\"\u0026#x3C;stdin\u003e\"\u003c/span\u003e, line 6, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u0026#x3C;module\u003e\nRuntimeError: dictionary changed size during iteration\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eは？\u003cem\u003eRuntimeError\u003c/em\u003eだと...!?\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eイテレーション中に辞書のサイズ変わったんですけど\u003c/strong\u003eと怒られたわけです。\u003c/p\u003e\n\u003cp\u003eということは、\u003cstrong\u003ekeys()を使っていながら、ループの内部で辞書をいじってはいけない\u003c/strong\u003eということになりますね。\u003c/p\u003e\n\u003ch2\u003ekeys()をリストとして先に確保してしまえ!!\u003c/h2\u003e\n\u003cp\u003eさて、解決していきます。\u003c/p\u003e\n\u003cp\u003eイテレーション中の辞書を書き換えてはいけなかったので、*list()*にしてしまお〜〜\u003cbr\u003e\nということで、キーのイテレータは配列として別物と扱わせます。\u003c/p\u003e\n\u003cp\u003e少しだけ変えた奴が下。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edictionary = {\n    \u003cspan class=\"hljs-string\"\u003e'a'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e'b'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e'c'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\n}\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e key \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(dictionary.keys()):    \u0026#x3C;=変えるのはここ\n    dictionary.pop(key)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで、出力も足してみます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(a)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e結果が以下になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e1\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eお〜動きましたね。\u003c/p\u003e\n\u003cp\u003eというわけで、辞書型でイテレーションを用いて何かするときは、配列とかで切り離して使ってあげるとエラーなくコードが動きますよ〜\u003c/p\u003e\n\u003cp\u003e今後は僕も気をつけたいと思います。\u003c/p\u003e\n","Title":"dictionary changed size during iterationの原因特定した","Date":"2020-10-18","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"py-dict-iter-err","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pythonで中身をpopで削除したいなーと思った時、なぜか「dictionary changed size during iteration」とのメッセージが。これは意外と出てきたら原因がパッとしないので、2度と同じことを起こさないように記録しておきます。","Published":true},{"contentHtml":"\u003ch2\u003eソート対象とする辞書の確認\u003c/h2\u003e\n\u003cp\u003eまずは辞書を確認します。今回使用する辞書型は、ある文書に出現した単語と出現回数を示す\u003cem\u003efreq_words\u003c/em\u003eという辞書としましょう。\u003c/p\u003e\n\u003cp\u003eその中身は次になります。\u003c/p\u003e\n\u003cp\u003eこのデータを作成には、辞書の初期化を簡単に行ってくれる\u003cem\u003ecollections.defaultdict\u003c/em\u003eを使用しています。こちらの使い方と今回使用する辞書の生成は別記事で行っているので、そちらを別途参照されたい。\u003ca href=\"https://yuta0306.github.io/blog/defaultdict-usage\"\u003e【defaultdict】で辞書型の初期化をサボる\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edefaultdict(\u0026#x3C;\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e '\u003cspan class=\"hljs-title\"\u003eint\u003c/span\u003e'\u003e, {'\u003cspan class=\"hljs-title\"\u003ePython\u003c/span\u003e':\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'-'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Wikipedia'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'From'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Wikipedia,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'the'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'free'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'encyclopedia'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Jump'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'to'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'navigation'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'search'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Look'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'up'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'or'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'python'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'in'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Wiktionary,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'dictionary.'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'may'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'refer'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'to:'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Pythons'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Pythonidae,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'a'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'family'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'of'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'nonvenomous'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'snakes'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'found'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Africa,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Asia,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'and'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Australia'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'genus,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'genus'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Pythonidae'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Africa'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Asia'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Contents'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'1'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Computing'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'People'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'3'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Roller'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'coasters'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'4'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Vehicles'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'5'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Weaponry'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'6'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Other'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'uses'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'7'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'See'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'also'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Computing[edit]'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'programming'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'language'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Python,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'native'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'code'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'compiler'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'for'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'CMU'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Common'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Lisp'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'internal'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'project'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'PERQ'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'computer'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'workstation'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'People[edit]'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Aenus'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'4th-century'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'BCE,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'student'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Plato'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'painter,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'ca.'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'360-320'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'BCE'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'vase'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'painter'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Poseidonia'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Byzantium,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'orator,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'diplomat'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Philip'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'II'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Macedon'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Catana,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'poet'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'who'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'accompanied'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Alexander'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Great'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Anghelo'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'1954–2014'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Romanian'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'graphic'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'artist'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'coasters[edit]'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Efteling,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'roller'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'coaster'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Netherlands'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Busch'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Gardens'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Tampa'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Bay,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'defunct'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Coney'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Island,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Cincinnati,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Ohio,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'steel'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Vehicles[edit]'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'automobile'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'maker,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'an'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Australian'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'car'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'company'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Ford'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'prototype,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Ford'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'prototype'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'sports'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Weaponry[edit]'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'missile,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'series'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Israeli'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'air-to-air'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'missiles'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'nuclear'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'primary,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'gas-boosted'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'fission'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'primary'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'used'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'thermonuclear'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'weapons'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Colt'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'revolver'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'uses[edit]'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'PYTHON,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'British'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'nuclear'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'war'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'contingency'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'plan'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'film,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2000'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'horror'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'film'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'by'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Richard'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Clabaugh'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'mythology,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'mythical'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'serpent'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Monty'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Pythons,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'comedy'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'group'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Monty'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Pictures,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'owned'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"troupe's\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'surviving'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'members'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'also[edit]'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Cython,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'programming'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'language'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'superset'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Pyton,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Norwegian'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'magazine'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Pithon'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Disambiguation'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'page'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'providing'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'links'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'topics'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'that'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'could'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'be'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'referred'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'same'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'termThis'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'disambiguation'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'lists'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'articles'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'associated'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'with'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'title'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Python.'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'If'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'link'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'led'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'you'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'here,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'wish'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'change'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'point'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'directly'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'intended'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'article.'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Retrieved'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'from'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'\"https://en.wikipedia.org/w/index.php?title=Python\u0026#x26;oldid=983067155\"'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Categories:'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'pagesHuman'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'pagesDisambiguation'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'pages'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'given-name-holder'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'listsHidden'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'categories:'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'short'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'descriptionsShort'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'description'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'is'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'different'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'WikidataAll'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'article'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'pagesAll'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'pagesAnimal'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'common'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Navigation'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'menu'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Personal'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'tools'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Not'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'logged'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'inTalkContributionsCreate'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'accountLog'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Namespaces'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'ArticleTalk'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Variants'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Views'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'ReadEditView'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'history'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'More'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Search'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Main'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'pageContentsCurrent'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'eventsRandom'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'articleAbout'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'WikipediaContact'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'usDonate'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Contribute'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'HelpLearn'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'editCommunity'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'portalRecent'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'changesUpload'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'file'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Tools'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'What'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'hereRelated'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'fileSpecial'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'pagesPermanent'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'linkPage'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'informationCite'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'this'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'pageWikidata'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'item'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Print/export'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Download'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'as'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'PDFPrintable'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'version'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'In'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'other'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'projects'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Wikimedia'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Commons'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Languages'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'AfrikaansAlemannischالعربيةAzərbaycancaবাংলাБеларускаяБългарскиČeštinaDanskDeutschEsperantoEuskaraفارسیFrançais한국어HrvatskiIdoBahasa'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'IndonesiaInterlinguaÍslenskaItalianoעבריתქართულიKongoLatinaLëtzebuergeschMagyarमराठीNederlands日本語Norsk'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'bokmålPolskiPortuguêsРусскийSlovenčinaСрпски'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'srpskiSrpskohrvatski'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'српскохрватскиSuomiSvenskaไทยTürkçeУкраїнськаاردوTiếng'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Việt中文'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Edit'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'This'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'was'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'last'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'edited'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'on'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'12'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'October'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2020,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'at'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'01:39'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'UTC.'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Text'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'available'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'under'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Creative'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Attribution-ShareAlike'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'License;'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'additional'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'terms'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'apply.'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'By'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'using'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'site,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'agree'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Terms'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Use'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Privacy'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Policy.'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Wikipedia®'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'registered'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'trademark'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Foundation,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Inc.,'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'non-profit'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'organization.'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'policy'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'About'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Disclaimers'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Contact'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Mobile'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'view'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Developers'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Statistics'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Cookie'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'statement'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e})\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e長いですがこのデータを使用します。\u003c/p\u003e\n\u003ch2\u003ekeyでソートする\u003c/h2\u003e\n\u003cp\u003eそれではキーでソートしていきます。\u003c/p\u003e\n\u003cp\u003eソート方法自体は、*sorted(ソート対象, key=ソートの基準, reverse=降順か昇順か)*で定義されるので、\u003cem\u003ekey\u003c/em\u003eの部分に\u003cstrong\u003elambda\u003c/strong\u003eを採用してソートしていきます。コード自体は至って単純です。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esort = \u003cspan class=\"hljs-built_in\"\u003esorted\u003c/span\u003e(freq_word.items(), key=\u003cspan class=\"hljs-keyword\"\u003elambda\u003c/span\u003e x:x[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e])\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれだけで昇順で並べることができます。結果を確認すると、(\u003cem\u003eprint(sort)\u003c/em\u003e)\u003c/p\u003e\n\u003cp\u003e多すぎるので上位20個だけ並べます。(\u003cem\u003eprint(sort[:20])\u003c/em\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[(\u003cspan class=\"hljs-string\"\u003e'\"https://en.wikipedia.org/w/index.php?title=Python\u0026#x26;oldid=983067155\"'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(1954–2014)'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(4th-century'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(Busch'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(Coney'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(Efteling),'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(Ford'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(Monty)'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(UTC).'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(automobile'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(ca.'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(film),'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(genus),'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(missile),'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(mythology),'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(nuclear'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(painter),'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(programming'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'-'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e, 2)]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e一応記号から始まっているものが先に来ています。記号をしっかり前処理で省いていれば良かったのでしょうが...\u003c/p\u003e\n\u003cp\u003eそれでもキーを元にソートすることができました!!\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e降順\u003c/strong\u003eにする場合は、\u003cem\u003ereverse=True\u003c/em\u003eを付け足すだけで昇順になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esort = \u003cspan class=\"hljs-built_in\"\u003esorted\u003c/span\u003e(freq_word.items(), key=\u003cspan class=\"hljs-keyword\"\u003elambda\u003c/span\u003e x:x[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e], reverse=\u003cspan class=\"hljs-literal\"\u003eTrue\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[(\u003cspan class=\"hljs-string\"\u003e'српскохрватскиSuomiSvenskaไทยTürkçeУкраїнськаاردوTiếng'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'you'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'workstation'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'with'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'wish'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'who'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'weapons'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'was'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'war'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'view'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'version'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'vase'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'using'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'uses[edit]'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'uses'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'used'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'usDonate'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'up'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'under'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e\"troupe's\"\u003c/span\u003e, 1)]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eしっかりアルファベッドで降順になっていました。\u003c/p\u003e\n\u003ch2\u003evalueでソートする\u003c/h2\u003e\n\u003cp\u003e続いて\u003cem\u003evalue\u003c/em\u003eでソートしていきます。\u003c/p\u003e\n\u003cp\u003e先ほどと同様に、ソート方法自体は、*sorted(ソート対象, key=ソートの基準, reverse=降順か昇順か)*で定義されるので、\u003cem\u003ekey\u003c/em\u003eの部分に\u003cstrong\u003elambda\u003c/strong\u003eを採用してソートしていきます。コード自体は至って単純です。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esort = \u003cspan class=\"hljs-built_in\"\u003esorted\u003c/span\u003e(freq_word.items(), key=\u003cspan class=\"hljs-keyword\"\u003elambda\u003c/span\u003e x:x[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e])\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれだけで昇順で並べることができます。結果を確認すると、(\u003cem\u003eprint(sort)\u003c/em\u003e)\u003c/p\u003e\n\u003cp\u003e多すぎるので上位20個だけ並べます。(\u003cem\u003eprint(sort[:20])\u003c/em\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[(\u003cspan class=\"hljs-string\"\u003e'-'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'From'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'Wikipedia,'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'encyclopedia'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'navigation'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'Look'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'up'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'python'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'Wiktionary,'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'dictionary.'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'refer'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'to:'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'Pythons'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'Pythonidae,'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'family'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'snakes'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'Africa,'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'Asia,'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'Australia'\u003c/span\u003e, 1), (\u003cspan class=\"hljs-string\"\u003e'(genus),'\u003c/span\u003e, 1)]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e今回はデータが小さく、ほとんどが1なので正しくソートされているかはこれではわかりにくいですが、全体を出力すると正しいことがわかると思います。\u003c/p\u003e\n\u003cp\u003eこちらもやはり\u003cstrong\u003e降順\u003c/strong\u003eにする場合は、\u003cem\u003ereverse=True\u003c/em\u003eを付け足すだけで昇順になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esort = \u003cspan class=\"hljs-built_in\"\u003esorted\u003c/span\u003e(freq_word.items(), key=\u003cspan class=\"hljs-keyword\"\u003elambda\u003c/span\u003e x:x[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e], reverse=\u003cspan class=\"hljs-literal\"\u003eTrue\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[(\u003cspan class=\"hljs-string\"\u003e'Python'\u003c/span\u003e, 23), (\u003cspan class=\"hljs-string\"\u003e'a'\u003c/span\u003e, 19), (\u003cspan class=\"hljs-string\"\u003e'the'\u003c/span\u003e, 15), (\u003cspan class=\"hljs-string\"\u003e'of'\u003c/span\u003e, 12), (\u003cspan class=\"hljs-string\"\u003e'to'\u003c/span\u003e, 9), (\u003cspan class=\"hljs-string\"\u003e'in'\u003c/span\u003e, 7), (\u003cspan class=\"hljs-string\"\u003e'disambiguation'\u003c/span\u003e, 5), (\u003cspan class=\"hljs-string\"\u003e'Wikipedia'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'or'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'may'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'and'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'Python,'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'roller'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'coaster'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'by'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'Disambiguation'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'page'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'links'\u003c/span\u003e, 3), (\u003cspan class=\"hljs-string\"\u003e'with'\u003c/span\u003e, 3)]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e回数が多い順（降順）になっていますね。\u003c/p\u003e\n\u003cp\u003e辞書型はこのように、\u003cem\u003esorted(dict.items(), key=lambda x:x[0 or 1], reverse=True or False\u003c/em\u003eでソートすることができました。\u003c/p\u003e\n\u003cp\u003e辞書型のソートは意外と悩むことが個人的には多いので、備忘録がてら公開しておきます。\u003c/p\u003e\n","Title":"Pythonで【辞書型】をソートする","Date":"2020-10-15","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"py-sort-dict","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pyythonでソートをしたい時、初めの頃はあまり思いつかないことも多く、lambda式ってなんや...!?こんな状態でソートにはあまり手が出ず、コピペで戦っている方も多いのではないでしょうか。今回はその中でも「辞書型」のソートについてお話しします。","Published":true},{"contentHtml":"\u003cp\u003eディープラーニングとか、とにかく複雑でメモリを使用するような計算処理が家庭用パソコンでもできる時代になりました。(そーゆー時代しか生きていないんですけど)とはいえ、メモリを意識せずともプログラムをかけているのは最適化されたライブラリを使っているからなわけで。。。そんなわけで自分でもメモリ管理を気をつけたいわけです。そこで、弱参照によって、うまいことPython処理系にメモリの破棄を促す方法をお話ししていきます。\u003c/p\u003e\n\u003ch2\u003ePyton処理系のお話\u003c/h2\u003e\n\u003cp\u003eさて、これまでPythonを触ってきた僕ですが、メモリ管理を意識したことはほっとんどなく、大学の授業でC言語を学んだ際、低レイヤーの処理に少し不慣れで難しさを感じました。\u003c/p\u003e\n\u003cp\u003eそれくらいPython処理系はメモリ管理を強く意識させることはないということなのでしょう。\u003c/p\u003e\n\u003cp\u003eそれで、Python処理系は基本的には、\u003cstrong\u003eオブジェクトが参照される回数をカウント\u003c/strong\u003eして、参照するものがなくなった段階でメモリを破棄する。そんなイメージらしい。\u003c/p\u003e\n\u003cp\u003eつまり、循環参照のような状態に陥ると、\u003cstrong\u003eユーザからは参照できないにもかかわらず、メモリに残ってしまう\u003c/strong\u003eということが発生するそうです。(他の手法でメモリが消されるのだろうが、こちらの消えて欲しいタイミングで消せることをメモリ管理と今回は考える)\u003c/p\u003e\n\u003ch2\u003eメモリが即座に消されるパターン\u003c/h2\u003e\n\u003cp\u003e以下が、参照カウント(あるオブジェクトを参照するものの数)によってきれいに即座にメモリが破棄されるパターンです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eobject\u003c/span\u003e:\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e\n    \n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003efunc\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ea\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(a)\n    \na = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# a: 参照カウント 1\u003c/span\u003e\nb = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# b: 参照カウント 1\u003c/span\u003e\nc = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# c: 参照カウント 1\u003c/span\u003e\n\na.b = b  \u003cspan class=\"hljs-comment\"\u003e# b: 参照カウント 2\u003c/span\u003e\nb.c = c  \u003cspan class=\"hljs-comment\"\u003e# c: 参照カウント 2\u003c/span\u003e\n\na = b = c = \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e# メモリ破棄(a, b, c: 参照カウント 0)\u0026#x3C;/code\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e循環参照により即座に破棄されないパターン\u003c/h2\u003e\n\u003cp\u003e続いて、循環参照を起こしてみます。これによって、長い間メモリに\u003cstrong\u003eユーザが参照できないオブジェクトが残ってしまいます\u003c/strong\u003e。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# ライブラリをインポート\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e weakref\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eobject\u003c/span\u003e:\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e\n    \n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003efunc\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ea\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(a)\n    \na = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# a: 参照カウント 1\u003c/span\u003e\nb = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# b: 参照カウント 1\u003c/span\u003e\nc = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# c: 参照カウント 1\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# 以下を弱参照で循環させる\u003c/span\u003e\na.b = b  \u003cspan class=\"hljs-comment\"\u003e# b: 参照カウント 2\u003c/span\u003e\nb.c = c  \u003cspan class=\"hljs-comment\"\u003e# c: 参照カウント 2\u003c/span\u003e\nc.a = a  \u003cspan class=\"hljs-comment\"\u003e# a: 参照カウント 2\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# 以下でメモリが破棄されているか参照する\u003c/span\u003e\na_ref = weakref.ref(a)\nb_ref = weakref.ref(b)\nc_ref = weakref.ref(c)\n\na = b = c = \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e# メモリ破棄できない(a, b, c: 参照カウント 1)\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(a_ref, b_ref, c_ref)\u0026#x3C;/code\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e出力はこんな感じです\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u0026#x3C;weakref at 0x7fc5e3a49bf0; to \u003cspan class=\"hljs-string\"\u003e'object'\u003c/span\u003e at 0x7fc5e3a40150\u003e \u0026#x3C;weakref at 0x7fc5e3a49c50; to \u003cspan class=\"hljs-string\"\u003e'object'\u003c/span\u003e at 0x7fc5e3a40190\u003e \u0026#x3C;weakref at 0x7fc5e3a49cb0; to \u003cspan class=\"hljs-string\"\u003e'object'\u003c/span\u003e at 0x7fc5e3a40250\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e破棄されていれば\u003cem\u003edead\u003c/em\u003eと書かれるはず...\u003c/p\u003e\n\u003cp\u003eやはりダメですね。弱参照で破棄させましょう。\u003c/p\u003e\n\u003ch2\u003eweakrefで改良\u003c/h2\u003e\n\u003cp\u003e先ほどの問題を、\u003cem\u003eweakref.ref\u003c/em\u003eを用いて、弱参照とすることで参照カウントを行わないように設定します。\u003c/p\u003e\n\u003cp\u003eそうすることで参照カウントが最終的に0になり、メモリをPython処理系によって即座に破棄されることができます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# ライブラリをインポート\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e weakref\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eobject\u003c/span\u003e:\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e\n    \n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003efunc\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ea\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(a)\n    \na = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# a: 参照カウント 1\u003c/span\u003e\nb = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# b: 参照カウント 1\u003c/span\u003e\nc = \u003cspan class=\"hljs-built_in\"\u003eobject\u003c/span\u003e()  \u003cspan class=\"hljs-comment\"\u003e# c: 参照カウント 1\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# 以下を弱参照で循環させる\u003c/span\u003e\na.b = weakref.ref(b)  \u003cspan class=\"hljs-comment\"\u003e# b: 参照カウント 0\u003c/span\u003e\nb.c = weakref.ref(c)  \u003cspan class=\"hljs-comment\"\u003e# c: 参照カウント 0\u003c/span\u003e\nc.a = weakref.ref(a)  \u003cspan class=\"hljs-comment\"\u003e# a: 参照カウント 0\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# 以下でメモリが破棄されているか参照\u003c/span\u003e\na_ref = weakref.ref(a)\nb_ref = weakref.ref(b)\nc_ref = weakref.ref(c)\n\na = b = c = \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e# メモリ破棄(a, b, c: 参照カウント 0)\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(a_ref, b_ref, c_ref)\u0026#x3C;/code\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e出力がこんな感じ。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u0026#x3C;weakref at 0x7f868932dcb0; dead\u003e \u0026#x3C;weakref at 0x7f868932dbf0; dead\u003e \u0026#x3C;weakref at 0x7f868932dc50; dead\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e全て\u003cem\u003edead\u003c/em\u003eになっていますね。これで期待した通りのタイミングでメモリを破棄することができました!!!\u003c/p\u003e\n\u003cp\u003e時には低いレイヤーまで考えてみるのも楽しいものですね。(時にはです。意識しなくていいことが幸せ)\u003c/p\u003e\n","Title":"【weakref】弱い参照によってメモリ管理をする","Date":"2020-10-12","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"weakref","THUMBNAIL":"python.jpg","Description":"ディープラーニングとか、とにかく複雑でメモリを使用するような計算処理が家庭用パソコンでもできる時代になりました。(そーゆー時代しか生きていないんですけど)とはいえ、メモリを意識せずともプログラムをかけているのは最適化されたライブラリを使っているからなわけで。。。そんなわけで自分でもメモリ管理を気をつけたいわけです。そこで、弱参照によって、うまいことPython処理系にメモリの破棄を促す方法をお話ししていきます。","Published":true},{"contentHtml":"\u003cp\u003e線形代数ライブラリを作ろうと色々とプログラムを書いていたわけですが、なんとなくで転置行列をどう簡単に求めるかということを考え始めました。その時に思いついた転置行列の求め方を共有します。\u003c/p\u003e\n\u003ch2\u003e一般解ぽいやつ(個人の見解)\u003c/h2\u003e\n\u003cp\u003eまずは一般に使われそうな方法を考えてみました。\u003c/p\u003e\n\u003cp\u003e入力行列は\u003cem\u003e3x2\u003c/em\u003eの行列として、求める転置行列は\u003cem\u003e2x3\u003c/em\u003eとします。対応するインデックスの関係がわかりやすいように数値を設定してみます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eA = [\n    [\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e],\n    [\u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e],\n    [\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e]\n]\n\nAt = []\nj = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003elen\u003c/span\u003e(A[j])):\n    row = []\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e j \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003elen\u003c/span\u003e(A)):\n        row.append(A[j][i])\n    At.append(row)\n    \n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(At)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで動くはず...オーソドックスか知らんけど、二重ループ回すのが一般的な思考だと思ったので、これを一般解として提示しました。\u003c/p\u003e\n\u003cp\u003eちなみに得られる出力はこちらです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[[11, 21, 31], [12, 22, 32]]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e多分大丈夫そう。\u003c/p\u003e\n\u003ch2\u003e一般解ぽいやつを内包表記してみた\u003c/h2\u003e\n\u003cp\u003eさきに示した一般解っぽいやつを内包表記を用いて書いてみます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eA = [\n    [\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e],\n    [\u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e],\n    [\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e]\n]\n\nj = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\nAt = [\n    [A[j][i] \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e j \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003elen\u003c/span\u003e(A))]\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003elen\u003c/span\u003e(A[j]))\n]\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(At)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれも同様に同じ出力が得られます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[[11, 21, 31], [12, 22, 32]]\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e【本題】zipと展開の合わせ技\u003c/h2\u003e\n\u003cp\u003eさて、本題です。僕が思いついた手法は以下になります。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eA(入力行列)を展開して、行列から列ごとに展開\u003c/li\u003e\n\u003cli\u003ezip()を用いて統合\u003c/li\u003e\n\u003cli\u003e内包表記にて転置行列を生成\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eこんな流れになります。言葉で言っても難しいので、コードをみてみます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eA = [\n    [\u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e],\n    [\u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e],\n    [\u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e]\n]\n\nAt = [\n    \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(row) \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e row \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e(*A)\n]\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(At)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれだけです。\u003c/p\u003e\n\u003cp\u003eただ、注意すべき点が一つだけあります。\u003c/p\u003e\n\u003cp\u003e**list()**としているところです。それはなぜかというと、zipで統合された物は\u003cem\u003etuple\u003c/em\u003eで帰ってきます。\u003c/p\u003e\n\u003cp\u003e内包表記において、listをとると次のような出力になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[(11, 21, 31), (12, 22, 32)]\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003etuple\u003c/em\u003eで返ってきても良いスクリプトであればそのままでも良いと思いますが、\u003cem\u003etuple\u003c/em\u003eだとイミュータブルなデータになってしまうので、大抵の場合**list()**でlist型に直してあげた方が良いことが多い気がします。\u003c/p\u003e\n\u003cp\u003e処理速度は測っていませんが、おそらく大きなサイズの行列の入力の時は高速に動くと思います(多分)\u003c/p\u003e\n\u003cp\u003e興味ある人は処理速度を計測してみてください。それでは、簡単な転置行列を求める方法の提案でした。(Pythonに限る)\u003c/p\u003e\n","Title":"簡単に転置行列求めてみた","Date":"2020-10-12","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"py-trans-matrix","Thumbnail":"/images/thumbnails/python.jpg","Description":"線形代数ライブラリを作ろうと色々とプログラムを書いていたわけですが、なんとなくで転置行列をどう簡単に求めるかということを考え始めました。その時に思いついた転置行列の求め方を共有します。","Published":true},{"contentHtml":"\u003cp\u003ePythonでクラスのインスタンスを生成して格納した変数を出力すると、class名とメモリ番地みたいなやつが出力されてしまいます。Pythonユーザーで機械学習とかで遊んでいる方はわかると思いますが、\u003cem\u003enumpy\u003c/em\u003eはnp.ndarrayというクラスを持ちながら出力では行列が出力されます。線形代数計算ライブラリを自作している際、そのような特殊な出力にしたいことがありました。実際に行った方法をお話しします。\u003c/p\u003e\n\u003cp\u003e正直タイトルにあるように、出落ちなのですが......\u003c/p\u003e\n\u003cp\u003e*__str__*というPython独自の特殊メソッドを用いて、やりたいことを実現していきたいと思います。\u003c/p\u003e\n\u003ch2\u003eやりたいこと\u003c/h2\u003e\n\u003cp\u003eまずは、実際にやりたいことを明確にしていきます。\u003cem\u003enumpy\u003c/em\u003eのような物を参考にしますが、今回は簡単のため、\u003cem\u003eScalar\u003c/em\u003eクラスを作ります。\u003c/p\u003e\n\u003cp\u003eこのクラスは、数値(intもしくはfloat)を受け取って、それを\u003cem\u003edata\u003c/em\u003eとして格納させます。\u003c/p\u003e\n\u003cp\u003e求める最終形はこちらです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003escalar = Scalar(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\n\u003cspan class=\"hljs-meta\"\u003e\u003e\u003e\u003e \u003c/span\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(scalar)\nScalar(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e本来であれば、*\u0026#x3C;__main__.Scalar object at 0x7f85f3a00150\u003e*のように表されてしまいますが、*Scalar(5)*というような特殊文字列にします。\u003c/p\u003e\n\u003ch2\u003eScalarクラスを作る\u003c/h2\u003e\n\u003cp\u003eさて、これから\u003cem\u003eScalar\u003c/em\u003eクラスを作ります。\u003c/p\u003e\n\u003cp\u003e初めは、最低限クラスとして機能するようなコードを書いていきます。\u003c/p\u003e\n\u003cp\u003eScalarクラスの仕様は以下とします。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eインスタンス生成時に\u003cem\u003eint\u003c/em\u003e又は\u003cem\u003efloat\u003c/em\u003eを受け取る\u003c/li\u003e\n\u003cli\u003e上の条件以外ならば、TypeErrorを発出\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eこれらの条件を満たすようにクラスを書いたのが以下になります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eScalar\u003c/span\u003e:\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, data\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003efloat\u003c/span\u003e):\n            self.data = data\n        \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n            \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e TypeError(\u003cspan class=\"hljs-string\"\u003e'expect int or float, but {}'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(data))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれでメインルーティンを書いていきます。\u003c/p\u003e\n\u003cp\u003e以下を試してみます。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eintを入力\u003c/li\u003e\n\u003cli\u003efloatを入力\u003c/li\u003e\n\u003cli\u003elistを入力\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eさて、書きたします。先ほどのクラスを書いたファイルを拡張していきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eScalar\u003c/span\u003e:\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, data\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003efloat\u003c/span\u003e):\n            self.data = data\n        \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n            \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e TypeError(\u003cspan class=\"hljs-string\"\u003e'expect int or float, but {}'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(data))\n            \n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    scalar = Scalar(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(scalar)\n    scalar = Scalar(\u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e)\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(scalar)\n    scalar = Scalar([\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e])\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(scalar)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eターミナルで実行してみます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ python scalar.py\n\u0026#x3C;__main__.Scalar object at 0x7fddd4300150\u003e\n\u0026#x3C;__main__.Scalar object at 0x7fddd4300190\u003e\nTraceback (most recent call last):\n  File \u003cspan class=\"hljs-string\"\u003e\"scalar.py\"\u003c/span\u003e, line 13, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u0026#x3C;module\u003e\n    scalar = Scalar([3])\n  File \u003cspan class=\"hljs-string\"\u003e\"scalar.py\"\u003c/span\u003e, line 6, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e __init__\n    raise TypeError(\u003cspan class=\"hljs-string\"\u003e'expect int or float, but {}'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(data))\nTypeError: (\u003cspan class=\"hljs-string\"\u003e'expect int or float, but {}'\u003c/span\u003e, class \u003cspan class=\"hljs-string\"\u003e'list'\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e3と3.0の入力は受け取れましたが、どうやら[3]の入力は期待した通りエラーを出してくれています。\u003c/p\u003e\n\u003cp\u003eしかし、やはりこのままではクラスをそのまま出力してしまっています。\u003c/p\u003e\n\u003ch2\u003e【\u003cstrong\u003estr\u003c/strong\u003e】の出番\u003c/h2\u003e\n\u003cp\u003eそれでは、__str__という特殊メソッドを用いて、出力結果を変更していきます。\u003c/p\u003e\n\u003cp\u003e先までのクラスを以下のように変えていきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eScalar\u003c/span\u003e:\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, data\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003efloat\u003c/span\u003e):\n            self.data = data\n        \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n            \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e TypeError(\u003cspan class=\"hljs-string\"\u003e'expect int or float, but {}'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(data))\n            \n    \u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003ecomment\u003c/span\u003e\"\u003e# 以下を追加\n    \u003cspan class=\"hljs-title\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__str__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'Scalar({})'\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(self.data)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e最後の2行を追加する感じです。\u003c/p\u003e\n\u003cp\u003eそれでは、\u003cem\u003eint\u003c/em\u003eと\u003cem\u003efloat\u003c/em\u003e以外はエラーを出すことを確認しているのでメインルーティンも同時に変えて以下のファイルとして完成させましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eScalar\u003c/span\u003e:\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, data\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003efloat\u003c/span\u003e):\n            self.data = data\n        \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n            \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e TypeError(\u003cspan class=\"hljs-string\"\u003e'expect int or float, but {}'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(data))\n            \n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__str__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'Scalar({})'\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(self.data)\n        \n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    scalar = Scalar(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(scalar)\n    scalar = Scalar(\u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e)\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(scalar)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこの出力結果はどうなるでしょうか......(ドキドキ??)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ python scalar.py\nScalar(3)\nScalar(3.0)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e期待した通りの結果ですね!!\u003c/p\u003e\n\u003cp\u003eこのように、クラスのインスタンスの出力を制御するには**\u003cstrong\u003estr\u003c/strong\u003e**という特殊メソッドを使うと良いみたいです。\u003c/p\u003e\n\u003cp\u003eただし、\u003cstrong\u003e__repr\u003c/strong\u003eというものもあります。今回のソースに関しては正直いうと、この**\u003cstrong\u003erepr\u003c/strong\u003e**の方が適している気がします。(evalを使えば可逆的に戻すことができるため)\u003c/p\u003e\n\u003cp\u003e詳しくはこちらを参照されたい(\u003ca href=\"https://docs.python.org/ja/3/reference/datamodel.html\"\u003ehttps://docs.python.org/ja/3/reference/datamodel.html\u003c/a\u003e)\u003c/p\u003e\n\u003ch2\u003e今回のソースの推奨\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eScalar\u003c/span\u003e:\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, data\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eor\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(data, \u003cspan class=\"hljs-built_in\"\u003efloat\u003c/span\u003e):\n            self.data = data\n        \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n            \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e TypeError(\u003cspan class=\"hljs-string\"\u003e'expect int or float, but {}'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e(data))\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__repr__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'Scalar({})'\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(self.data)\n        \n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    scalar = Scalar(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(scalar)\n    scalar = Scalar(\u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e)\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(scalar)\u003c/code\u003e\u003c/pre\u003e\n","Title":"classの標準出力を特殊な文字列にしたい【__str__|__repr__】","Date":"2020-10-12","Category":"Python","Tags":["Python","特殊メソッド","オブジェクト指向"],"Authors":"ゆうぼう","Slug":"py-class-repr","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pythonでクラスのインスタンスを生成して格納した変数を出力すると、class名とメモリ番地みたいなやつが出力されてしまいます。Pythonユーザーで機械学習とかで遊んでいる方はわかると思いますが、*numpy*はnp.ndarrayというクラスを持ちながら出力では行列が出力されます。線形代数計算ライブラリを自作している際、そのような特殊な出力にしたいことがありました。実際に行った方法をお話しします。","Published":true},{"contentHtml":"\u003cp\u003ePythonからtkinterを使ってGUIを実装していました。Entryを使ってユーザの入力値を受け取ることができますが、デフォルト値の設定の仕方に困ったので、デフォルト値を設定した方法を共有します。\u003c/p\u003e\n\u003ch2\u003eまずはEntryを生成\u003c/h2\u003e\n\u003cp\u003eとりあえずコピペしたら動くようにします。\u003c/p\u003e\n\u003cp\u003eちなみに今回の僕の環境は以下になります。同じ環境で動かしたい場合は、以下のライブラリを\u003cem\u003erequirements.txt\u003c/em\u003eにコピペでもして、インストールしてください。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ealtgraph==0.17\ncertifi==2020.6.20\nmacholib==1.14\nmysql-connector-python==8.0.21\nprotobuf==3.13.0\npyinstaller==4.0\npyinstaller-hooks-contrib==2020.9\nsix==1.15.0\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003epip install -r  requirements.txt\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上のやつをターミナルで回せばインストールできると思います。\u003c/p\u003e\n\u003cp\u003eさて、本題。。。\u003c/p\u003e\n\u003cp\u003eまずは、Entryを生成します。今回は、\u003cem\u003eentry.py\u003c/em\u003eに書いていきます。\u003c/p\u003e\n\u003cp\u003e一番大きなくくりのクラスを\u003cem\u003eApp\u003c/em\u003eとして、このインスタンスをメインルーティンで立てていきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e tkinter \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e tk\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003etk.Tk\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, *args, **kwargs\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-comment\"\u003e# 魔法\u003c/span\u003e\n        tk.Tk.__init__(self, *args, **kwargs)\n\n        \u003cspan class=\"hljs-comment\"\u003e# 以下でタイトルとウィンドウサイズを設定\u003c/span\u003e\n        self.title(\u003cspan class=\"hljs-string\"\u003eu\"tkinterでEntryにデフォルト値を入れたい\"\u003c/span\u003e)\n        self.geometry(\u003cspan class=\"hljs-string\"\u003e\"500x300\"\u003c/span\u003e)\n\n        \u003cspan class=\"hljs-comment\"\u003e# Frameを生成\u003c/span\u003e\n        self.frame = tk.Frame()\n        self.frame.pack()\n        \u003cspan class=\"hljs-comment\"\u003e# Labelを生成\u003c/span\u003e\n        label = tk.Label(self.frame, text=\u003cspan class=\"hljs-string\"\u003e'Your name'\u003c/span\u003e)\n        label.pack()\n        \u003cspan class=\"hljs-comment\"\u003e# Entryを生成\u003c/span\u003e\n        name = tk.Entry(self.frame)\n        name.pack()\n\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    app = App()\n    app.mainloop()\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれでとりあえずエントリー(入力受付)が可能になります。ここでUIは一切凝っていないので、下のような状態になると思います。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/article/tk-entry-default_1.png\" alt=\"完成画面\"\u003e\u003c/p\u003e\n\u003cp\u003eこの入力受付に対して、「山田太郎」をデフォルト値として設定していきたいと思います。\u003c/p\u003e\n\u003ch2\u003eデフォルト値の設定\u003c/h2\u003e\n\u003cp\u003e続いて、「山田太郎」をデフォルト値として設定していきます。基盤は先ほどのコードになります。\u003c/p\u003e\n\u003cp\u003e先に言うと、*tk.Entry().insert()*メソッドを用いて、エントリーに対して文字列を挿入します。\u003c/p\u003e\n\u003cp\u003eそれではコードを追加しましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e tkinter \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e tk\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003etk.Tk\u003c/span\u003e):\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, *args, **kwargs\u003c/span\u003e):\u003c/span\u003e\n        \u003cspan class=\"hljs-comment\"\u003e# 魔法\u003c/span\u003e\n        tk.Tk.__init__(self, *args, **kwargs)\n\n        \u003cspan class=\"hljs-comment\"\u003e# 以下でタイトルとウィンドウサイズを設定\u003c/span\u003e\n        self.title(\u003cspan class=\"hljs-string\"\u003eu\"tkinterでEntryにデフォルト値を入れたい\"\u003c/span\u003e)\n        self.geometry(\u003cspan class=\"hljs-string\"\u003e\"500x300\"\u003c/span\u003e)\n\n        \u003cspan class=\"hljs-comment\"\u003e# Frameを生成\u003c/span\u003e\n        self.frame = tk.Frame()\n        self.frame.pack()\n        \u003cspan class=\"hljs-comment\"\u003e# Labelを生成\u003c/span\u003e\n        label = tk.Label(self.frame, text=\u003cspan class=\"hljs-string\"\u003e'Your name'\u003c/span\u003e)\n        label.pack()\n        \u003cspan class=\"hljs-comment\"\u003e# Entryを生成\u003c/span\u003e\n        name = tk.Entry(self.frame)\n\n        \u003cspan class=\"hljs-string\"\u003e\"\"\"ここにコードを1行追加\"\"\"\u003c/span\u003e\n        name.insert(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"山田太郎\"\u003c/span\u003e)\n        \u003cspan class=\"hljs-string\"\u003e\"\"\"ここにコードを1行追加\"\"\"\u003c/span\u003e\n\n        name.pack()\n\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    app = App()\n    app.mainloop()\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e概要は上記のようになります。\u003c/p\u003e\n\u003cp\u003e後半部分に1行足しただけです。足したのはこれ。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003ename.insert(0, \"山田太郎\")\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e第一引数はインデックスを指していて、今回はエントリーの一番初めに挿入したいので、\u003cem\u003e0\u003c/em\u003eを入れました。\u003c/p\u003e\n\u003cp\u003e第二引数は実際に挿入したい値です。よって、今回は「\u003cem\u003e山田太郎\u003c/em\u003e」を書きました。\u003c/p\u003e\n\u003cp\u003eこうすることで結果は以下が得られると思います。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/article/tk-entry-default_2.png\" alt=\"挿入後完成画面\"\u003e\u003c/p\u003e\n\u003cp\u003eこれでデフォルト値の設定ができました。\u003c/p\u003e\n\u003cp\u003e正攻法なのかは定かではないですが......www\u003c/p\u003e\n\u003cp\u003eこれでデフォルト値の設定ができました。必要な時は是非ご活用を。\u003c/p\u003e\n","Title":"【Python】tkinterでEntryにデフォルト値を入れたい","Date":"2020-10-07","Category":"Python","Tags":["Python","Tkinter"],"Authors":"ゆうぼう","Slug":"tk-entry-default","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pythonからtkinterを使ってGUIを実装していました。Entryを使ってユーザの入力値を受け取ることができますが、デフォルト値の設定の仕方に困ったので、デフォルト値を設定した方法を共有します。","Published":true},{"contentHtml":"\u003cp\u003e時々、Seleniumで要素を取得してクリックした際、うまくいかないことがあります。その時いくつかの解決策があるのですが、今回はJavaScriptを発火させて解決する方法を解説していきます。。\u003c/p\u003e\n\u003cp\u003eそれでは早速やってみます。\u003c/p\u003e\n\u003cp\u003e前提条件は以下になります。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePython環境が整っている\u003c/li\u003e\n\u003cli\u003eSeleniumをインストール済み\u003c/li\u003e\n\u003cli\u003echromedriverをインストール済み\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eSeleniumからJavascriptを発火する\u003c/h2\u003e\n\u003cp\u003eJavaScriptを発火させることはとても簡単です。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e selenium \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e webdriver\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e chromedriver_binary\n\ndriver = webdriver.Chrome()\ndriver.get(\u003cspan class=\"hljs-string\"\u003e'https://www.example.com/'\u003c/span\u003e)\ndriver.execute_script(\u003cspan class=\"hljs-string\"\u003e'Your Procedure'\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eまずは、Webdriverを開き、その後\u003cem\u003eexecute_script\u003c/em\u003eメソッドを用いて、引数にJSのスクリプトを書き込むのみです。\u003c/p\u003e\n\u003ch2\u003e実際にボタンをクリックしてみる!\u003c/h2\u003e\n\u003cp\u003e実際にJSのスクリプトと合わせて、\u003cem\u003e#button\u003c/em\u003eを持つ要素をクリックしてみましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e selenium \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e webdriver\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e chromedriver_binary\n\ndriver = webdriver.Chrome()\ndriver.get(\u003cspan class=\"hljs-string\"\u003e'https://www.example.com/'\u003c/span\u003e)\ndriver.execute_script(\u003cspan class=\"hljs-string\"\u003e'document.getElementById(\"button\").click();'\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eスクリプト全体の流れは以下になります。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e必要なモジュールをインポート\u003c/li\u003e\n\u003cli\u003ewebdriver立ち上げる\u003c/li\u003e\n\u003cli\u003e対象のサイトを開く\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eexecute_script\u003c/em\u003eでJSを発火\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e上記のスクリプトはこの流れになります。\u003c/p\u003e\n\u003cp\u003e時々、ポップアップとかトレース型広告とかでクリックできない場面があります。\nその際はJSから直押ししてあげるとうまく行くことがあります。\u003c/p\u003e\n\u003cp\u003eこの方法で解決できない場面も多いですが、比較的容易な手法なので頭の中に一つの解決策として留めておくのもありだと思います。\u003c/p\u003e\n","Title":"Seleniumからクリックができない...そうだ、JSからクリックしよう","Date":"2020-09-26","Category":"Python","Tags":["Python","Selenium"],"Authors":"ゆうぼう","Slug":"selenium-click-by-js","Thumbnail":"/images/thumbnails/python.jpg","Description":"時々、Seleniumで要素を取得してクリックした際、うまくいかないことがあります。その時いくつかの解決策があるのですが、今回はJavaScriptを発火させて解決する方法を解説していきます。","Published":true},{"contentHtml":"\u003cp\u003eデータ収集中にint型に文字列をパースすることがあったのですが、みるからに数値なのにエラーが返ってきました。これは何気にドツボでした。\u003c/p\u003e\n\u003ch2\u003eValueErrorの発生\u003c/h2\u003e\n\u003cp\u003eエラーを招いたコードの例がこちら\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ea = np.array([\u003cspan class=\"hljs-string\"\u003e'1.0'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2.0'\u003c/span\u003e]).astype(\u003cspan class=\"hljs-string\"\u003e'int16'\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e実際に出たエラーがこちらです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eValueError: invalid literal \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e int() with base 10:\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eエラー読んでもいまいち理解できませんでした。\u003c/p\u003e\n\u003cp\u003e正しくないリテラル...どういうこっちゃ!?\u003c/p\u003e\n\u003ch2\u003e【原因】文字列が小数だった\u003c/h2\u003e\n\u003cp\u003e原因は意外にもシンプルで、文字列の形が\u003cstrong\u003e小数\u003c/strong\u003eだったからみたいです...\u003c/p\u003e\n\u003cp\u003e他のコードで確認してみると\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ea = np.array([\u003cspan class=\"hljs-string\"\u003e'1'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2'\u003c/span\u003e]).astype(\u003cspan class=\"hljs-string\"\u003e'int16'\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e# \u003e\u003e array([1, 2], dtype=int16\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ea = np.array([\u003cspan class=\"hljs-string\"\u003e'1.0'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2.0'\u003c/span\u003e]).astype(\u003cspan class=\"hljs-string\"\u003e'float32'\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e# \u003e\u003e array([1, 2], dtype=float32)\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e小数であった時、floatへの変換はうまくいっているようです。\u003c/p\u003e\n\u003ch2\u003e改善策\u003c/h2\u003e\n\u003cp\u003eいったんfloatに変換してから、intに変換するとできます。遠回りですが。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ea = np.array([\u003cspan class=\"hljs-string\"\u003e'1.0'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2.0'\u003c/span\u003e]).astype(\u003cspan class=\"hljs-string\"\u003e'float32'\u003c/span\u003e).astype(\u003cspan class=\"hljs-string\"\u003e'int16'\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e# \u003e\u003e array([1, 2], dtype=int16)\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこのようなエラーに直面したら、\u003cstrong\u003e配列の中身の文字列が少数になっていないか\u003c/strong\u003e確認してみましょう!!\u003c/p\u003e\n","Title":"invalid literal for int() with base 10: でint型のパースでエラーが！ ","Date":"2020-09-11","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"parse-int-base10","Thumbnail":"/images/thumbnails/python.jpg","Description":"データ収集中にint型に文字列をパースすることがあったのですが、みるからに数値なのにエラーが返ってきました。これは何気にドツボでした。","Published":true},{"contentHtml":"\u003cp\u003eMacは普段使いなので、あまり情報収集に使いたくなかったために、常時Windowsのノートパソコンを情報収集ボットとしようとしました。\u003c/p\u003e\n\u003cp\u003eその時コードの共有をDropboxを用いたのですが、なぜかいくらpandasを入れても\u003cbr\u003e\n\u003cem\u003e\"No module named 'pandas.core.internals.managers'; 'pandas.core.internals' is not a package\"\u003c/em\u003e\u003cbr\u003e\nというエラーが...\u003c/p\u003e\n\u003cp\u003eその原因がわかったのでそのお話をします。\u003c/p\u003e\n\u003ch2\u003e\"No module\"エラーの発生!?\u003c/h2\u003e\n\u003cp\u003e前述したとおり、環境の違う状態でコードを共有したわけです。\u003c/p\u003e\n\u003cp\u003e確認してみると、やはりpandasのバージョンが違っていました。他の記事でも採算を話をしていますが、機械学習によく使われるライブラリたちは特段アップデートが早く、さらに大幅な変更も多い印象です。\u003c/p\u003e\n\u003cp\u003e実際に起こった原因は、\u003cstrong\u003epickleに入れたpandasとロード先のpandasのバージョンの違い\u003c/strong\u003eでした。\u003c/p\u003e\n\u003cp\u003e実際の僕のバージョンは以下でした。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e対象\u003c/th\u003e\n\u003cth\u003epandasのバージョン\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e以前のpandas\u003c/td\u003e\n\u003ctd\u003e0.24.2\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e移植先のpandas\u003c/td\u003e\n\u003ctd\u003e0.23.1\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eそのバージョンが違うと次のようなエラーが出ることがあります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-string\"\u003e\"No module named 'pandas.core.internals.managers'; 'pandas.core.internals' is not a package\"\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上のようなモジュールがないよ！！\u003c/p\u003e\n\u003cp\u003eと怒られるわけです。\u003c/p\u003e\n\u003cp\u003eなので、次の解決策を示します\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e再度データを作り直す\u003c/li\u003e\n\u003cli\u003e前の環境を調べてinstallし直す\u003c/li\u003e\n\u003cli\u003e前の環境にrequirements.txtを作成しておいて同じ環境を立てる\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e次のセクションでお話をします。\u003c/p\u003e\n\u003ch2\u003e再度データを作り直す\u003c/h2\u003e\n\u003cp\u003eこのやり方はいうまでもないですが、もう一度作り直す方法です。\u003c/p\u003e\n\u003cp\u003e前の環境がわからないなど、どうしようもない時はこの方法で太刀打ちすれば良いかと思います\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e pd\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e pickle\n\ndf = pd.DataFrame()\n\u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'sample.pickle'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'wb'\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e f:\n    pickle.load(df, f)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eといったように、現状の環境で作り直す方法です。\u003c/p\u003e\n\u003ch2\u003e前の環境を調べてinstallし直す\u003c/h2\u003e\n\u003cp\u003e前の環境でのバージョンが分かっていれば入れ直せば良いでしょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ pip install pandas==\u003cspan class=\"hljs-string\"\u003e'your pandas version'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで特定のバージョンのpandasを入手できるはずです。\u003c/p\u003e\n\u003ch2\u003e前の環境にrequirements.txtを作成しておいて同じ環境を立てる\u003c/h2\u003e\n\u003cp\u003e前の環境が目の前にあるならば、以下のようにして\u003cem\u003erequirements.txt\u003c/em\u003eを作成してしまえば早いでしょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ pip freeze \u003e requirements.txt\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 新しい環境にて\u003c/span\u003e\n$ pip install -r requirements.txt\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで以前と同じ環境が整うので、心配なく動くと思います。\u003c/p\u003e\n","Title":"pickleでロードした時pandasがあるのに\"No module ~~\"で悩んだ件について","Date":"2020-09-10","Category":"Python","Tags":["Python","Pandas"],"Authors":"ゆうぼう","Slug":"pandas-nomodule","Thumbnail":"/images/thumbnails/python.jpg","Description":"Macは普段使いなので、あまり情報収集に使いたくなかったために、常時Windowsのノートパソコンを情報収集ボットとしようとしました。その時コードの共有をDropboxを用いたのですが、なぜかいくらpandasを入れても\"No module named 'pandas.core.internals.managers'; 'pandas.core.internals' is not a package\"というエラーが。。。その原因がわかったのでそのお話をします。","Published":true},{"contentHtml":"\u003cp\u003e他のディレクトリで作ったモジュールの\u003cem\u003eimport\u003c/em\u003eをさせたかったのですが、その方法がイマイチわからなくて詰まりました。\u003c/p\u003e\n\u003cp\u003e下の階層にあるなら\"\u003cem\u003e.\u003c/em\u003e\"でつなげばいいのですが、階層を遡る必要があると困ったので解決策を提示します。\u003c/p\u003e\n\u003cp\u003e今回は下層にあるとして進めます。階層が深くなると.(ドット)による記述が無駄に長くなるので、ある程度この記述で冗長な記述も避けられるかな？？と思ったからです。\u003c/p\u003e\n\u003ch2\u003eやりたかったこと\u003c/h2\u003e\n\u003cp\u003e他のディレクトリ内のモジュールを引っ張ってくる。\u003c/p\u003e\n\u003cp\u003e階層構造は以下のようにしてみる\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e--- target\n    |      |\n    |      |--- sample.py\n    |\n    |--- main.py  \u0026#x3C;-- 今ここ\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eで、直感的にやりたかったのがこれ\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e@ main.py\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e target.sample \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Sample\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれはできるんだけど、もし\u003cbr\u003e\n\u003cem\u003efrom target.target1.target2.sample import Sample\u003c/em\u003e\u003cbr\u003e\nとかだったらすごく萎えるよね...\u003c/p\u003e\n\u003ch2\u003e【 解決策 】Pathにセットしてあげる\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003esysとosを使って解決します!!\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e先ほどの階層構造に則ると、参照して欲しいディレクトリはtargetですね。\u003c/p\u003e\n\u003cp\u003e先に手順を話すと以下になります。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003esysとosのimport\u003c/li\u003e\n\u003cli\u003eos.getcwd()でカレントディレクトリを取得(今回は同じ階層のディレクトリにつながっているため)\u003c/li\u003e\n\u003cli\u003esys.path.append()でPathを追加\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eこの手順にのっとって書いてみます\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 手順1\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e sys\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e os\n\n\u003cspan class=\"hljs-comment\"\u003e# 手順2 \u0026#x26; 3\u003c/span\u003e\nsys.path.append(os.getcwd() + \u003cspan class=\"hljs-string\"\u003e'target'\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sample \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Sample\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e一応これで対応できました。\u003c/p\u003e\n\u003cp\u003eもし仮に4層、5層...と続いてもpathをセットしておけば、探してくれるので大丈夫です。\u003c/p\u003e\n\u003cp\u003e階層を遡るときは、その都度pathにいれるパスを変えてみてください!!\u003c/p\u003e\n","Title":"自作のモジュールを他のディレクトリから持ってきたい!!","Date":"2020-09-03","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"python-add-path","Thumbnail":"/images/thumbnails/python.jpg","Description":"機械学習の学習中に、他のディレクトリで作った自作関数が使いたかったのだけど、うまくimportする方法に悩みました。pythonがモジュールを探すpathをセットしてあげるだけで済んだので、その方法を解説します。","Published":true},{"contentHtml":"\u003cp\u003ePythonで始める機械学習でお勉強中にFutureWarningに遭遇しました。GroupKFoldで起こったのですが、とりあえず今は使えるもののこの先使えなくなることが示されているので修正します。\u003c/p\u003e\n\u003ch2\u003eFutureWarningを発生させてみる\u003c/h2\u003e\n\u003cp\u003e少し前の書籍の型に合わせてコードを書いてみます。\u003cdel\u003eFutureWarning\u003c/del\u003eが発生するはずです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e@python\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.model_selection \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e GroupKFold  \u003cspan class=\"hljs-comment\"\u003e# グループ交差検証\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.datasets \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e make_blobs  \u003cspan class=\"hljs-comment\"\u003e# 合成データ生成\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# 合成データセットを生成\u003c/span\u003e\nX, y = make_blobs(n_samples=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, random_state=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e# 最初の2サンプルが同じグループに、次の4つが同じグループに\u003c/span\u003e\ngroups = [\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e]\nscores = cross_val_score(logreg, X, y, groups, cv=GroupKFold(n_splits=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Cross-validation scores:\\n{}\"\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(scores))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eおそらくこの型が少し前の技術書の仕様だと思います。\u003cem\u003ePythonで始める機械学習\u003c/em\u003eもこの型でした。\u003c/p\u003e\n\u003cp\u003e結果をみてみます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eCross-validation scores:\n[0.5 1.  1. ]\n/Users/user/opt/anaconda3/envs/ML/lib/python3.6/site-packages/sklearn/utils/validation.py:71: \nFutureWarning: Pass groups=[0, 0, 1, 1, 1, 1, 3, 3, 4, 4] as keyword args. \nFrom version 0.25 passing these as positional arguments will result \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e an error\nFutureWarning)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこんな感じのWarningが発生します。\u003c/p\u003e\n\u003cp\u003e最後の方を読んでみると、\u003cstrong\u003eバージョン0.25からはgroups配列は位置引数としてだとエラーになるよ\u003c/strong\u003eみたいな感じのことを言っています。改善方法は至ってシンプルです。\u003cbr\u003e\n次に示します。\u003c/p\u003e\n\u003ch2\u003e改善策\u003c/h2\u003e\n\u003cp\u003e改善策は至ってシンプルです。\u003c/p\u003e\n\u003cp\u003e**groups=(グループ配列)**にすればいいのです。直したコードを示します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-meta\"\u003e@python\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.model_selection \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e GroupKFold  \u003cspan class=\"hljs-comment\"\u003e# グループ交差検証\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.datasets \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e make_blobs  \u003cspan class=\"hljs-comment\"\u003e# 合成データ生成\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# 合成データセットを生成\u003c/span\u003e\nX, y = make_blobs(n_samples=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, random_state=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e# 最初の2サンプルが同じグループに、次の4つが同じグループに\u003c/span\u003e\ngroups = [\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e]\nscores = cross_val_score(logreg, X, y, groups=groups, cv=GroupKFold(n_splits=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Cross-validation scores:\\n{}\"\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(scores))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e直したのはこの部分\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003escores = cross_val_score(logreg, X, y, groups=groups, cv=GroupKFold(n_splits=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e単に\u003cem\u003egroups=groups\u003c/em\u003eにするだけです。これだけで直ります。\u003c/p\u003e\n\u003cp\u003eやはりFutureWarningが多いですね〜この周りは。\u003c/p\u003e\n","Title":"Scikit-learnのGroupKFoldでgroups配列でWarning発生!!","Date":"2020-08-18","Category":"Python","Tags":["Scikit-learn","Python"],"Authors":"ゆうぼう","Slug":"groupfold-groups","Thumbnail":"/images/thumbnails/network.jpg","Description":"Pythonで始める機械学習でお勉強中にFutureWarningに遭遇しました。GroupKFoldで起こったのですが、とりあえず今は使えるもののこの先使えなくなることが示されているので修正します。","Published":true},{"contentHtml":"\u003cp\u003eMeCabを利用したWebアプリケーションをHerokuにデプロイしようとして、環境をrequirements.txtにまとめていたのですが、、、どうしてもエラーが出てインストールが止まってしまうことがありました。原因は、Mecabだったようなので、エラー回避方法を共有します。\u003c/p\u003e\n\u003cp\u003e前提条件として、\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003emecabを\u003cem\u003epip mecab\u003c/em\u003eでインストール済み\u003c/li\u003e\n\u003cli\u003eHerokuをCLIでいじる準備ができている\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eとりあえずrequirements.txtを作成\u003c/h2\u003e\n\u003cp\u003eまあ、pip listしてまず現環境におけるライブラリをみていきましょう。\u003c/p\u003e\n\u003cp\u003e例えばこんな構成だとします。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e(myvenv)$ ~ pip list\nPackage                Version\n---------------------- -------------------\ncertifi                2020.6.20\nchardet                3.0.4\nclick                  7.1.2\nFlask                  1.1.2\ngunicorn               20.0.4\nidna                   2.10\nitsdangerous           1.1.0\nJinja2                 2.11.2\nMarkupSafe             1.1.1\nmecab                  0.996.2\nmysql-connector-python 8.0.21\noauthlib               3.1.0\npip                    20.1.1\nprotobuf               3.12.4\nrequests               2.24.0\nrequests-oauthlib      1.3.0\nsetuptools             49.2.0.post20200714\nsix                    1.15.0\nurllib3                1.25.10\nWerkzeug               1.0.1\nwheel                  0.34.2\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e中段くらいにmecabのバージョン0.996.2がありますね。それではこれをもとに、requirements.txtを作成していきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e(myvenv)$ ~ pip freeze \u003e requirements.txt\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで下準備OKです\u003c/p\u003e\n\u003ch2\u003eHerokuへログインしてデプロイ\u003c/h2\u003e\n\u003cp\u003eそれではコマンドラインを開きまして、デプロイしていきましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ ~ heroku % login\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれを打つと、認証画面的にブラウザが勝手に開きます。それでログインできていれば、この画面を消してターミナルに戻る旨の内容が書かれています。\u003c/p\u003e\n\u003cp\u003eそれで、成功したとして、次は\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ ~ % heroku git:\u003cspan class=\"hljs-built_in\"\u003eclone\u003c/span\u003e -a your-app-name\n$ ~ % \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e your-app-directory\n\n$ your-app-directory % git add .\n$ your-app-directorygit % commit -am \u003cspan class=\"hljs-string\"\u003e\"deploy!!\"\u003c/span\u003e\n$ your-app-directorygit % push heroku master\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこうするとPythonの場合、\u003cstrong\u003eruntime.txt\u003c/strong\u003eからPythonのバージョンを、\u003cstrong\u003erequirements.txt\u003c/strong\u003eから依存ライブラリのパッケージを確認して、インストールしていくと次のような問題が発生します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e-----\u003e Python app detected\n-----\u003e Installing python-3.8.5\n-----\u003e Installing pip 20.0.2, setuptools 39.0.1 and wheel 0.34.2\n-----\u003e Installing SQLite3\n-----\u003e Installing requirements with pip\n    Collecting certifi==2020.6.20\n        Downloading certifi-2020.6.20-py2.py3-none-any.whl (156 kB)\n    Collecting chardet==3.0.4\n            ( 中略 )\n    Collecting mecab==0.996.2\n        Downloading mecab-0.996.2.tar.gz (62 kB)\n        ERROR: Command errored out with \u003cspan class=\"hljs-built_in\"\u003eexit\u003c/span\u003e status 1:\n            \u003cspan class=\"hljs-built_in\"\u003ecommand\u003c/span\u003e: /app/.heroku/python/bin/python -c \u003cspan class=\"hljs-string\"\u003e'import sys, setuptools, tokenize; sys.argv[0] = '\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e'/tmp/pip-install-kr1kq54r/\n            mecab/setup.py'\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e'; __file__='\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e'/tmp/pip-install-kr1kq54r/mecab/setup.py'\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e';f=getattr(tokenize, '\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e'open'\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e', open)\n            (__file__);code=f.read().replace('\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e'\\r\\n'\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e', '\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e');f.close();exec(compile(code, __file__, '\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e'exec'\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"'\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e'))'\u003c/span\u003e \n            egg_info --egg-base /tmp/pip-install-kr1kq54r/mecab/pip-egg-info\n                cwd: /tmp/pip-install-kr1kq54r/mecab/\n        Complete output (10 lines):\n        /bin/sh: 1: mecab-config: not found\n        Traceback (most recent call last):\n            File \u003cspan class=\"hljs-string\"\u003e\"\u0026#x3C;string\u003e\"\u003c/span\u003e, line 1, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u0026#x3C;module\u003e\n            File \u003cspan class=\"hljs-string\"\u003e\"/tmp/pip-install-kr1kq54r/mecab/setup.py\"\u003c/span\u003e, line 53, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u0026#x3C;module\u003e\n            include_dirs=cmd2(\u003cspan class=\"hljs-string\"\u003e\"mecab-config --inc-dir\"\u003c/span\u003e),\n            File \u003cspan class=\"hljs-string\"\u003e\"/tmp/pip-install-kr1kq54r/mecab/setup.py\"\u003c/span\u003e, line 19, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e cmd2\n            \u003cspan class=\"hljs-built_in\"\u003ereturn\u003c/span\u003e cmd1(strings).split()\n            File \u003cspan class=\"hljs-string\"\u003e\"/tmp/pip-install-kr1kq54r/mecab/setup.py\"\u003c/span\u003e, line 15, \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e cmd1\n            \u003cspan class=\"hljs-built_in\"\u003ereturn\u003c/span\u003e os.popen(strings).readlines()[0].rstrip()\n        IndexError: list index out of range\n        ----------------------------------------\n    ERROR: Command errored out with \u003cspan class=\"hljs-built_in\"\u003eexit\u003c/span\u003e status 1: python setup.py egg_info Check the logs \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e full \u003cspan class=\"hljs-built_in\"\u003ecommand\u003c/span\u003e output.\n    !     Push rejected, failed to compile Python app.\n    !     Push failed\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこんな感じに怒られるわけですよ...orz\u003c/p\u003e\n\u003ch2\u003e悪さをするのはMecabだった！？\u003c/h2\u003e\n\u003cp\u003eどうやら悪さをしていたのは、\u003cstrong\u003eMeCab\u003c/strong\u003eだったようです。再度requirements.txtの一部を確認します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003erequirements.txt   |\n----------------------------\ncertifi==2020.6.20\nchardet==3.0.4\nclick==7.1.2\nFlask==1.1.2\ngunicorn==20.0.4\nidna==2.10\nitsdangerous==1.1.0\nJinja2==2.11.2\nMarkupSafe==1.1.1\nmecab==0.996.2\n..................\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eどうやら調べてみると、このmecabで指定しているのがよくないみたいですね...\u003c/p\u003e\n\u003cp\u003eというわけで、この\u003cstrong\u003emecab==0.996.2\u003c/strong\u003eというのをどかしてやりますね。どうするかと言いますと、\u003cbr\u003e\n\u003cstrong\u003emecab-python\u003c/strong\u003eに変えてあげます。特にバージョンは指定しなくてもよかったです。\u003c/p\u003e\n\u003cp\u003eということで直します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003erequirements.txt   |\n----------------------------\n..................\n..................\nmecab-python       \u003cspan class=\"hljs-comment\"\u003e# mecab==0.996.2 を修正\u003c/span\u003e\n..................\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれでうまくいくはずです！！\u003c/p\u003e\n\u003cp\u003eもしうまくいかなかったら、打ち損じとか全角になってないか、他のライブラリでのエラー等を疑うといいと思います。\u003c/p\u003e\n\u003cp\u003eこれぬまにハマりそうなので、同じエラーに悩む人がいたら是非参考にしてください。\u003c/p\u003e\n","Title":"HerokuにMecCabインストールで困った!!","Date":"2020-08-05","Category":"Python","Tags":["Python","MeCab"],"Authors":"ゆうぼう","Slug":"heroku-mecab","Description":"MeCabを利用したWebアプリケーションをHerokuにデプロイしようとして、環境をrequirements.txtにまとめていたのですが、、、どうしてもエラーが出てインストールが止まってしまうことがありました。原因は、Mecabだったようなので、エラー回避方法を共有します。","Published":true},{"contentHtml":"\u003cp\u003eロジスティック回帰をscikit-learnで実装していると、デフォルトはL2正則化でペナルティを与えています。\u003c/p\u003e\n\u003cp\u003eそこで、もっとスパースにしてやろうとL1正則化を行おうとしたのだが、エラーを吐かれた。その時の解決策を共有します。\u003c/p\u003e\n\u003ch2\u003eエラーを吐かれた時のバージョン\u003c/h2\u003e\n\u003cp\u003e一応最近開発が立て込んでいるので、Anacondaを使って開発環境を分けているのですが、\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e(base)$ conda activate ML\n(ML)$ conda list    (pip listでも行ける)\n......\n......\nscikit-learn           0.23.1    \n......\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eということで、scikit-learnのバージョンは\u003cem\u003e0.23.1\u003c/em\u003eでした。\u003c/p\u003e\n\u003ch2\u003e実装してみる\u003c/h2\u003e\n\u003cp\u003eそれでは実装してみます。至ってシンプルなスクリプトで動く想定でやっていきます。こちらで変化させるハイパーパラメータは以下になります。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eパラメータ\u003c/th\u003e\n\u003cth\u003e値\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eC(正則化のつよさ)\u003c/td\u003e\n\u003ctd\u003e1(デフォルト)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epenalty\u003c/td\u003e\n\u003ctd\u003eL1正則化\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003emax_iter(イテレーションの上限)\u003c/td\u003e\n\u003ctd\u003e100000\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eまた、訓練データ(X_train, y_train)とテストデータ(X_test, y_test)に分けてあることにします。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.linear_model \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e LogisticRegression\n\nlr_l1 = LogisticRegression(penalty=\u003cspan class=\"hljs-string\"\u003e'l1'\u003c/span\u003e, max_iter=\u003cspan class=\"hljs-number\"\u003e100000\u003c/span\u003e).fit(X_train, y_train)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eするとこんなエラーが返ってきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e~/opt/anaconda3/envs/ML/lib/python3.6/site-packages/sklearn/linear_model/_logistic.py \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e fit(self, X, y, sample_weight)\n1302         The SAGA solver supports both float64 and float32 bit arrays.\n1303         \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\n-\u003e 1304         solver = _check_solver(self.solver, self.penalty, self.dual)\n1305 \n1306         if not isinstance(self.C, numbers.Number) or self.C \u0026#x3C; 0:\n\n~/opt/anaconda3/envs/ML/lib/python3.6/site-packages/sklearn/linear_model/_logistic.py in _check_solver(solver, penalty, dual)\n441     if solver not in ['liblinear', 'saga'] and penalty not in ('l2', 'none'):\n442         raise ValueError(\"\u003c/span\u003eSolver %s supports only \u003cspan class=\"hljs-string\"\u003e'l2'\u003c/span\u003e or \u003cspan class=\"hljs-string\"\u003e'none'\u003c/span\u003e penalties, \u003cspan class=\"hljs-string\"\u003e\"\n--\u003e 443                          \"\u003c/span\u003egot %s penalty.\u003cspan class=\"hljs-string\"\u003e\" % (solver, penalty))\n444     if solver != 'liblinear' and dual:\n445         raise ValueError(\"\u003c/span\u003eSolver %s supports only \u003cspan class=\"hljs-string\"\u003e\"\n\nValueError: Solver lbfgs supports only 'l2' or 'none' penalties, got l1 penalty.\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eファイルのありかは人それぞれですが、エラーは返ってきます。\u003cbr\u003e\nデフォルトの\u003cstrong\u003eSolverがlbfgs\u003c/strong\u003eに変わっていたそうで、l2またはnoneしかペナルティをサポートしていないそうです。\u003c/p\u003e\n\u003cp\u003eというわけで、Solverに\u003cstrong\u003eliblinear\u003c/strong\u003eを指定しないといけないようですね。\u003c/p\u003e\n\u003ch2\u003eliblinearを指定する\u003c/h2\u003e\n\u003cp\u003e先ほどのエラーをなくすため、新たにパラメータを足します。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eパラメータ\u003c/th\u003e\n\u003cth\u003e値\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eC(正則化のつよさ)\u003c/td\u003e\n\u003ctd\u003e1(デフォルト)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epenalty\u003c/td\u003e\n\u003ctd\u003eL1正則化\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003emax_iter(イテレーションの上限)\u003c/td\u003e\n\u003ctd\u003e100000\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003esolver\u003c/td\u003e\n\u003ctd\u003eliblinear\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eでは足します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.linear_model \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e LogisticRegression\n\nlr_l1 = LogisticRegression(penalty=\u003cspan class=\"hljs-string\"\u003e'l1'\u003c/span\u003e, solver=\u003cspan class=\"hljs-string\"\u003e'liblinear'\u003c/span\u003e, max_iter=\u003cspan class=\"hljs-number\"\u003e100000\u003c/span\u003e).fit(X_train, y_train)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで無事動くようになりました!!!\u003c/p\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003eまとめです。\u003cbr\u003e\nscikit-learnを用いて、ロジスティック回帰を使う時、さらにL1正則化をかけたい時は**solver='liblinear'**を引数に追加しましょう。\u003c/p\u003e\n\u003cp\u003eこの周りは色々と変化が早いので、本を買う際にも初版等も確認しつつ買った方が良い気がしました。バージョン確認も大切に。\u003c/p\u003e\n","Title":"ロジスティック回帰でL1正則化を利用できない問題の解決法","Date":"2020-08-01","Category":"Python","Tags":["ML","Python","Scikit-learn"],"Authors":"ゆうぼう","Slug":"logistic-with-l1","Thumbnail":"/images/thumbnails/network.jpg","Description":"ロジスティック回帰をscikit-learnで実装していると、デフォルトはL2正則化でペナルティを与えています。そこで、もっとスパースにしてやろうとL1正則化を行おうとしたのだが、エラーを吐かれた。その時の解決策を共有します。","Published":true},{"contentHtml":"\u003cp\u003e一応参考書通りに学習するのだが、基本的にはいつも最新版をインストールして使う人間なもので、Warning及びErrorとの戦いはよくあることです。ので、Warningとかが出るとうっと身構えてしまうので、困らないように備忘録かつ反面教師として残しておきます。\u003c/p\u003e\n\u003ch2\u003eとりあえずmake_forge()をやってみようか\u003c/h2\u003e\n\u003cp\u003eとりあえずmake_forge()でforgeデータを生成し、Warningさせてみますかね。。。\u003c/p\u003e\n\u003cp\u003eライブラリはmglearnを使うのでpip環境がある人は、\u003cstrong\u003epip install mglearn\u003c/strong\u003eをしてください。その上で、\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mglearn    \u003cspan class=\"hljs-comment\"\u003e# mglearnのインポート\u003c/span\u003e\nX, y = mglearn.datasets.make_forge()    \u003cspan class=\"hljs-comment\"\u003e# make_forgeメソッドで生成\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e以下がアウトプットです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e/Users/user/opt/anaconda3/envs/ML/lib/python3.6/site-packages/sklearn/utils/deprecation.py:86: FutureWarning: Function make_blobs is deprecated; Please import make_blobs directly from scikit-learn\nwarnings.warn(msg, category=FutureWarning)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eなんだかWarningで怒られましたorz\u003c/p\u003e\n\u003cp\u003e将来的にsklearn.datasets.makeblobs()と被るよってことを言いたいらしいです。\u003cem\u003escikit-learnから直接make_blobsをインポートしろ\u003c/em\u003eとか言ってますね。\n次からWarningを避けて行きます。\u003c/p\u003e\n\u003ch2\u003emake_blobsに乗り換える\u003c/h2\u003e\n\u003cp\u003emake_blobsメソッドに乗り換えて行きます。これはscikit-learnのdatasetsモジュールに含まれているみたいなので、こいつをインポートして行きます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.datasets \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e make_blobs    \u003cspan class=\"hljs-comment\"\u003e# これでインポート完了\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eインポートがうまくいったら次はメソッドを呼び出します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eX, y = make_blobs()\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれでデータがうまく生成されたようです。無事Warningも出てきません!!!\n念のため、Xの型をみて行きます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"X.shape: {}\"\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(X.shape))\n\n\u003cspan class=\"hljs-comment\"\u003e# -\u003e X.shape: (100, 2)\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e詰まるところ、2つの特徴量を持つデータが100個生成されました。100*2の行列ですね。\nmake_forge()のときは2つの特徴量のデータが26個を期待していたようなので、データ量が増えたみたいですね。\u003c/p\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003emglearn.datasets.make_forge()でWarningを回避する方法のまとめがこちらです。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.datasets \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e make_blobs    \u003cspan class=\"hljs-comment\"\u003e# インポート\u003c/span\u003e\nX, y = make_blobs()    \u003cspan class=\"hljs-comment\"\u003e# make_blobsメソッドの実行\u003c/span\u003e\n\n\u003cspan class=\"hljs-string\"\u003e\"\"\"\n確認のおまけ\n\"\"\"\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"X.shape: {}\"\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(X.shape))\n\n\u003cspan class=\"hljs-comment\"\u003e#-\u003e X.shape: (100, 2)    # 特徴量を2つ持つ100個のデータ\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003escikit-learn周りは、アップデートが早いので少し古い技術書なだけでも、Future Warningが出たり、Errorが出たりすることが多々あります。\n気をつけながら学習をする必要がありそうですね。では、今回はここまで！\u003c/p\u003e\n","Title":"scikit-learnのmake_blobsに乗り換えよう!!","Date":"2020-07-21","Category":"Python","Tags":["ML","Python","Scikit-learn"],"Authors":"ゆうぼう","Slug":"prefer-to-make_blobs","Thumbnail":"/images/thumbnails/python.jpg","Description":"Pythonではじめる機械学習をやっている最中に、mglearnというライブラリからmake_forge()メソッドでデータを生成することがあったのですが、Warningが出て怒られたので、推奨される形に戻すために互換性のあるコードに直します。","Published":true},{"contentHtml":"\u003cp\u003eMySQLのデータベースを扱う際に、Pythonスクリプトから接続したくなったので、Pythonからの接続方法を紹介します。\u003c/p\u003e\n\u003ch2\u003emysql-connector-pythonのインストール\u003c/h2\u003e\n\u003cp\u003eまずは、mysql-connector-pythonのインストールを行っていきます。(復習がてら)\u003c/p\u003e\n\u003cp\u003e今回は、pipを使ってインストールしていきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$~ pip install mysql-connector-python\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれでエラーが出ずに進めばインストールできているはずです。とりあえずこれで準備は完了。\u003c/p\u003e\n\u003ch2\u003eまずはconnectorをインポート\u003c/h2\u003e\n\u003cp\u003eまずは接続するためのメソッドをインポートしないと使えないので、インポートしましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mysql.connector\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで準備はOK!!\u003c/p\u003e\n\u003ch2\u003e接続とDB操作のためのカーソルを生成、そして切断\u003c/h2\u003e\n\u003cp\u003e今回の例では、以下の情報を前提にした上で、exampleというデータベースに直で接続していきます。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003euser\u003c/th\u003e\n\u003cth\u003ehost\u003c/th\u003e\n\u003cth\u003epassword\u003c/th\u003e\n\u003cth\u003edatabase\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eroot\u003c/td\u003e\n\u003ctd\u003e127.0.0.1\u003c/td\u003e\n\u003ctd\u003eexample\u003c/td\u003e\n\u003ctd\u003eexample\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eさて、早速接続の処理を書いてみましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ecnx = mysql.connector.connect(\n    user=\u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e,\n    password=\u003cspan class=\"hljs-string\"\u003e'example'\u003c/span\u003e,\n    database=\u003cspan class=\"hljs-string\"\u003e'example'\u003c/span\u003e,\n)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれだけで接続は完了です。（パスワード等が全て正しければ）\u003cbr\u003e\nホストはデフォルトが127.0.0.1なので書かなくていいです。\u003c/p\u003e\n\u003cp\u003eこの後に、カーソルをあてます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ecur = cnx.cursor()\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこの処理だけでオッケーです。\u003c/p\u003e\n\u003cp\u003e他の処理等も終わったら、しっかり切断しておきましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ecur.close()\ncnx.close()\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで接続と切断の処理は完了です。\u003c/p\u003e\n\u003ch2\u003eSHOW TABLE表示していく\u003c/h2\u003e\n\u003cp\u003eそれでは、ここまでで準備は整ったので、*cur = cnx.cursor()*のすぐ後に以下の処理を書いてみましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esql = \u003cspan class=\"hljs-string\"\u003e\"SHOW TABLES\"\u003c/span\u003e    \u003cspan class=\"hljs-comment\"\u003e#命令文\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(cur.execute(sql))    \u003cspan class=\"hljs-comment\"\u003e#結果の出力\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# --\u003e None    #あれ？？ない\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e見事失敗ですね(笑)\u003c/p\u003e\n\u003cp\u003e僕はずっと、実行した結果が戻り値として吐き出されていると思ってこの処理を書きました。しかし、それがないので\u003cem\u003eNone\u003c/em\u003eが返ってきてしまうのですね...\u003c/p\u003e\n\u003cp\u003eそれでは正しいスクリプトを書いていきましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esql = \u003cspan class=\"hljs-string\"\u003e\"SHOW TABLES\"\u003c/span\u003e    \u003cspan class=\"hljs-comment\"\u003e#命令文\u003c/span\u003e\ncur.execute(sql)    \u003cspan class=\"hljs-comment\"\u003e#実行\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(cur.fetchone())    \u003cspan class=\"hljs-comment\"\u003e#1つだけフェッチする\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# --\u003e (example, )\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e出力本体は人の環境によって異なりますが、このような感じでタプル型でテーブル名が出力されます。\u003c/p\u003e\n\u003cp\u003e複数処理結果をまとめて吐き出すには「\u003cstrong\u003efetchall()\u003c/strong\u003e」というものがあるようです。今回は一つだけテーブルに対して情報を吐いてもらうので「\u003cstrong\u003efetchone()\u003c/strong\u003e」で取得しました。\u003c/p\u003e\n\u003ch2\u003eせっかくなので'SHOW DATABASES'もやってみる\u003c/h2\u003e\n\u003cp\u003eせっかくなので「\u003cstrong\u003eSHOW DATABASES\u003c/strong\u003e」も出力してみましょう。DATABASE群をみるので、今回接続する際は先ほどのdatabase引数はなくします。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003euser\u003c/th\u003e\n\u003cth\u003ehost\u003c/th\u003e\n\u003cth\u003epassword\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eroot\u003c/td\u003e\n\u003ctd\u003e127.0.0.1\u003c/td\u003e\n\u003ctd\u003eexample\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mysql.connector\n\ncnx = mysql.connector.connect(\n    user=\u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e,\n    password=\u003cspan class=\"hljs-string\"\u003e'example'\u003c/span\u003e,\n    )\n\ncur = cnx.cursor()\n\ncur.execute(\u003cspan class=\"hljs-string\"\u003e\"SHOW DATABASES\"\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(cur.fetchall())    \u003cspan class=\"hljs-comment\"\u003e#\u0026#x3C;\u0026#x3C; fetchall()に注意\u003c/span\u003e\n\ncur.close()\ncnx.close()\n\n\u003cspan class=\"hljs-comment\"\u003e# --\u003e [(example, ), (sys, )]\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e今回は複数のデータがあることに留意したとして、**fetchall()**しました。ここも見落としポイントが多い気がします。\u003c/p\u003e\n\u003cp\u003e僕はそうだったのですが、タプル型に全ての名前が入ると期待したのですが、実際は一つ一つの名前に対してタプルを作り、そのタプル群をリストに入れるようです。\u003c/p\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003eここまでみてきた結果、一番安全なのはこれでしょうか。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ecur = cnx.cursor()\n\ncur.execute(\u003cspan class=\"hljs-string\"\u003e\"SHOW DATABASES\"\u003c/span\u003e)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(cur.fetchall()) \u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eまずはカーソルを当ててから、そこでコマンドを実行する。そのあとは「\u003cstrong\u003efetchall()\u003c/strong\u003e」でリストに包める。\u003c/p\u003e\n\u003cp\u003e情報が1つしかないことがわかっているならば問題ないのですが、基本的には複数あるという想定のもと、fetchall()で取得する方がいい気もしました。\u003c/p\u003e\n","Title":"mysql-connector-pythonで'SHOW ~~~'に困ったのでその対処法","Date":"2020-07-14","Category":"Python","Tags":["MySQL","Python"],"Authors":"ゆうぼう","Slug":"show_tables-mysql-python","Thumbnail":"/images/thumbnails/database.jpg","Description":"Pythonのライブラリ「mysql-connector-python」を使っていたのですが、なかなか'SHOW TABLES'や'SHOW DATABASES'を出力できなかったので、その対処法を備忘録としてまとめます。","Published":true},{"contentHtml":"\u003cp\u003eMySQLのデータベースを扱う際に、Pythonスクリプトから接続したくなったので、Pythonからの接続方法を紹介します。\u003c/p\u003e\n\u003ch2\u003emysql-connector-pythonのインストール\u003c/h2\u003e\n\u003cp\u003eまずは、mysql-connector-pythonのインストールを行っていきます。\u003c/p\u003e\n\u003cp\u003e今回は、pipを使ってインストールしていきます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$~ pip install mysql-connector-python\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれでエラーが出ずに進めばインストールできているはずです。とりあえずこれで準備は完了。\u003c/p\u003e\n\u003ch2\u003eまずはconnectorをインポート\u003c/h2\u003e\n\u003cp\u003eまずは接続するためのメソッドをインポートしないと使えないので、インポートしましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mysql.connector\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで準備はOK!!\u003c/p\u003e\n\u003ch2\u003e接続と切断\u003c/h2\u003e\n\u003cp\u003eそれではここまで完成できていれば、あとは接続の処理を書くだけです。\u003c/p\u003e\n\u003cp\u003e今回の例では、以下の情報を前提にしてみます。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003euser\u003c/th\u003e\n\u003cth\u003ehost\u003c/th\u003e\n\u003cth\u003epassword\u003c/th\u003e\n\u003cth\u003edatabase\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eroot\u003c/td\u003e\n\u003ctd\u003e127.0.0.1\u003c/td\u003e\n\u003ctd\u003e**********\u003c/td\u003e\n\u003ctd\u003eexample\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eさて、早速接続の処理を書いてみましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mysql.connectorcnx = mysql.connecor.connect(\n        user=\u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e,\n        host=\u003cspan class=\"hljs-string\"\u003e'127.0.0.1'\u003c/span\u003e,\n        password=\u003cspan class=\"hljs-string\"\u003e'**********'\u003c/span\u003e,\n        database=\u003cspan class=\"hljs-string\"\u003e'example'\u003c/span\u003e,\n    )\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれだけで接続は完了です。（パスワード等が全て正しければ）\u003c/p\u003e\n\u003cp\u003e他の処理等も終わったら、しっかり切断しておきましょう。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e    cnx.close()\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで接続と切断の処理は完了です。\u003c/p\u003e\n\u003cp\u003eまた、hostが127.0.0.1であることは、他のポートとぶつかっているために人為的にローカルホストやポート番号を変えていなければ、デフォルトの位置になっているはずなので、以下でも実行可能です。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mysql.connectorcnx = mysql.connecor.connect(\n        user=\u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e,\n        host=\u003cspan class=\"hljs-string\"\u003e'127.0.0.1'\u003c/span\u003e,\n        password=\u003cspan class=\"hljs-string\"\u003e'**********'\u003c/span\u003e,\n        database=\u003cspan class=\"hljs-string\"\u003e'example'\u003c/span\u003e,\n    cnx = mysql.connecor.connect(\n        user=\u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e,\n        password=\u003cspan class=\"hljs-string\"\u003e'**********'\u003c/span\u003e,\n        database=\u003cspan class=\"hljs-string\"\u003e'example'\u003c/span\u003e,\n    )\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003econnectの引数の内容を辞書にまとめておく\u003c/h2\u003e\n\u003cp\u003e先ほど、引数に入力した情報を辞書にまとめて接続することもできます。\n以下のようなスクリプトになります。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mysql.connector\n\n    config = {\n        user: \u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e,\n        host: \u003cspan class=\"hljs-string\"\u003e'127.0.0.1'\u003c/span\u003e,\n        password: \u003cspan class=\"hljs-string\"\u003e'**********'\u003c/span\u003e,\n        database: \u003cspan class=\"hljs-string\"\u003e'example'\u003c/span\u003e,\n    }\n    cnx = mysql.connector.connect(**config)\n\n    cnx.close()\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003econfigは辞書型なので、「**」でアンパックすることも忘れないようにしましょう。\u003c/p\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003e最終的にまとめると、流れはこんな感じです。\u003c/p\u003e\n\u003ch2\u003e#辞書使わない\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mysql.connector\n\ncnx = mysql.connecor.connect(\n    user=\u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003estrings\u003c/span\u003e\"\u003e'\u003cspan class=\"hljs-title\"\u003eroot\u003c/span\u003e',\n    \u003cspan class=\"hljs-title\"\u003ehost\u003c/span\u003e=\u0026#x3C;\u003cspan class=\"hljs-title\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003estrings\u003c/span\u003e\"\u003e'127.0.0.1',\n    \u003cspan class=\"hljs-title\"\u003epassword\u003c/span\u003e=\u0026#x3C;\u003cspan class=\"hljs-title\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003estrings\u003c/span\u003e\"\u003e'**********',\n    \u003cspan class=\"hljs-title\"\u003edatabase\u003c/span\u003e=\u0026#x3C;\u003cspan class=\"hljs-title\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003estrings\u003c/span\u003e\"\u003e'\u003cspan class=\"hljs-title\"\u003eexample\u003c/span\u003e',\n)\n\n\u003cspan class=\"hljs-title\"\u003ecnx\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eclose\u003c/span\u003e()\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e#辞書型\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mysql.connector\n\nconfig = {\n    user: \u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003estrings\u003c/span\u003e\"\u003e'\u003cspan class=\"hljs-title\"\u003eroot\u003c/span\u003e',\n    \u003cspan class=\"hljs-title\"\u003ehost\u003c/span\u003e:\u003c/span\u003e \u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003estrings\u003c/span\u003e\"\u003e'127.0.0.1',\n    \u003cspan class=\"hljs-title\"\u003epassword\u003c/span\u003e:\u003c/span\u003e \u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003estrings\u003c/span\u003e\"\u003e'**********',\n    \u003cspan class=\"hljs-title\"\u003edatabase\u003c/span\u003e:\u003c/span\u003e \u0026#x3C;span \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\"\u003cspan class=\"hljs-title\"\u003estrings\u003c/span\u003e\"\u003e'\u003cspan class=\"hljs-title\"\u003eexample\u003c/span\u003e',\n}\n\u003cspan class=\"hljs-title\"\u003ecnx\u003c/span\u003e = \u003cspan class=\"hljs-title\"\u003emysql\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003econnector\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003econnect\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e**config\u003c/span\u003e)\n\n\u003cspan class=\"hljs-title\"\u003ecnx\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eclose\u003c/span\u003e()\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e後ほど、テーブルを実際に作ったり、インサートしたりの方法を紹介しようと思います。\u003c/p\u003e\n","Title":"mysql-connector-pythonでローカルDBに接続する","Date":"2020-07-13","Category":"Python","Tags":["MySQL","Python"],"Authors":"ゆうぼう","Slug":"connect-to-mysql-python","Thumbnail":"/images/thumbnails/database.jpg","Description":"Pythonのライブラリ「mysql-connector-python」を使って、ローカルのMySQLデータベースに接続します。","Published":true}],"category":"Python","categories":["Web","JavaScript","Competition","Cloud","Linux","Python","ML","Go","SQL"],"tags":["Apache","Appium","atmaCup","AWS","CentOS7","conda","CSS","Flask","Go","HTML","JavaScript","JSON","Mac","make","map","MeCab","ML","MySQL","NLP","node.js","Pandas","Python","Scikit-learn","Selenium","subprocess","tensorflow","Tkinter","zsh","オブジェクト指向","デコレータ","データ分析","特殊メソッド"],"page":2},"__N_SSG":true},"page":"/category/[category]/[page]","query":{"category":"Python","page":"2"},"buildId":"kfJKyjxmWpuJs08_kxdEB","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-049bc3bbf79e0795c2ba.js" async=""></script><script src="/_next/static/chunks/framework-1490dc09f6cde4fcb29b.js" async=""></script><script src="/_next/static/chunks/commons-6a9f4cf7ad7bdfa7813f.js" async=""></script><script src="/_next/static/chunks/main-bbcf2247cff69dcfdd57.js" async=""></script><script src="/_next/static/chunks/pages/_app-86bfdbf99940ef7548f7.js" async=""></script><script src="/_next/static/chunks/996-b8c21bef3804147ecb4b.js" async=""></script><script src="/_next/static/chunks/211-bcdca227a7c3439a9648.js" async=""></script><script src="/_next/static/chunks/pages/category/%5Bcategory%5D/%5Bpage%5D-d190d442db39c0e2ad07.js" async=""></script><script src="/_next/static/kfJKyjxmWpuJs08_kxdEB/_buildManifest.js" async=""></script><script src="/_next/static/kfJKyjxmWpuJs08_kxdEB/_ssgManifest.js" async=""></script></body></html>