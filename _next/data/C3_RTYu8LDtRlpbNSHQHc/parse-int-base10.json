{"pageProps":{"postData":{"contentHtml":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/katex@0.15.0/dist/katex.min.css\">\n</head>\n<body>\n<p>データ収集中にint型に文字列をパースすることがあったのですが、みるからに数値なのにエラーが返ってきました。これは何気にドツボでした。</p>\n<h2>ValueErrorの発生</h2>\n<p>エラーを招いたコードの例がこちら</p>\n<pre><code class=\"hljs language-python\">a = np.array([<span class=\"hljs-string\">'1.0'</span>, <span class=\"hljs-string\">'2.0'</span>]).astype(<span class=\"hljs-string\">'int16'</span>)\n</code></pre>\n<p>実際に出たエラーがこちらです。</p>\n<pre><code class=\"hljs language-bash\">ValueError: invalid literal <span class=\"hljs-keyword\">for</span> int() with base 10:\n</code></pre>\n<p>エラー読んでもいまいち理解できませんでした。</p>\n<p>正しくないリテラル...どういうこっちゃ!?</p>\n<h2>【原因】文字列が小数だった</h2>\n<p>原因は意外にもシンプルで、文字列の形が<strong>小数</strong>だったからみたいです...</p>\n<p>他のコードで確認してみると</p>\n<pre><code class=\"hljs language-python\">a = np.array([<span class=\"hljs-string\">'1'</span>, <span class=\"hljs-string\">'2'</span>]).astype(<span class=\"hljs-string\">'int16'</span>)\n\n<span class=\"hljs-comment\"># >> array([1, 2], dtype=int16</span>\n</code></pre>\n<pre><code class=\"hljs language-python\">a = np.array([<span class=\"hljs-string\">'1.0'</span>, <span class=\"hljs-string\">'2.0'</span>]).astype(<span class=\"hljs-string\">'float32'</span>)\n\n<span class=\"hljs-comment\"># >> array([1, 2], dtype=float32)</span>\n</code></pre>\n<p>小数であった時、floatへの変換はうまくいっているようです。</p>\n<h2>改善策</h2>\n<p>いったんfloatに変換してから、intに変換するとできます。遠回りですが。</p>\n<pre><code class=\"hljs language-python\">a = np.array([<span class=\"hljs-string\">'1.0'</span>, <span class=\"hljs-string\">'2.0'</span>]).astype(<span class=\"hljs-string\">'float32'</span>).astype(<span class=\"hljs-string\">'int16'</span>)\n\n<span class=\"hljs-comment\"># >> array([1, 2], dtype=int16)</span>\n</code></pre>\n<p>このようなエラーに直面したら、<strong>配列の中身の文字列が少数になっていないか</strong>確認してみましょう!!</p>\n</body>\n</html>\n","Title":"invalid literal for int() with base 10: でint型のパースでエラーが！ ","Date":"2020-09-11","Category":"Python","Tags":"Python","Authors":"ゆうぼう","Slug":"parse-int-base10","Thumbnail":"/images/thumbnails/python.jpg","Description":"データ収集中にint型に文字列をパースすることがあったのですが、みるからに数値なのにエラーが返ってきました。これは何気にドツボでした。","Published":true},"categories":["論文","Web","JavaScript","Competition","Cloud","Linux","Python","ML","Go","SQL"],"tags":["Apache","Appium","atmaCup","AWS","CentOS7","CentOS8","Colab","COMET,mental health,NLP,mental state knowledge,mentalisation,Contrasive Learning,MentalRoBERTa,KC-Net","conda","CSS","dialogue system","dialogue system,Internet-Augmented","dialogue system,knowledge-base","dialogue system,NLI","dialogue system,persona,Prompt-Tuning","dialogue system,survey,DST","DST","ESPNet","ffmpeg","Flask","Gating Mechanism","Go","Google Colaboratory","Heroku","Highway Transformer","HTML","humor detection","humor detection,multi-modal","JavaScript","JSON","Kaggle","laughter,shared laughter","Linux","Mac","make","map","MeCab","ML","MT,transformer,Multi-Hop Transformer","multi-modal","MySQL","NLP","Node","node.js","npm","Pandas","Poetry","Python","Pytorch","pytorch-lightning","Scikit-learn","Selenium","Self-Dependency-Units (SDU)","SISR","subprocess","Super-Resolution","survey","survey,dialogue system","survey,NLP,knowledge-base,PLMKE,commonsense,encyclopedic,Knowledge-Intensive NLP","tensorflow","Tkinter","transformer","transformer,Highway Transformer,Gating Mechanism,Self-Dependency-Units (SDU)","zsh","オブジェクト指向","デコレータ","データ分析","特殊メソッド","超解像"]},"__N_SSG":true}