{"pageProps":{"postData":{"contentHtml":"<p>Macは普段使いなので、あまり情報収集に使いたくなかったために、常時Windowsのノートパソコンを情報収集ボットとしようとしました。</p>\n<p>その時コードの共有をDropboxを用いたのですが、なぜかいくらpandasを入れても<br>\n<em>\"No module named 'pandas.core.internals.managers'; 'pandas.core.internals' is not a package\"</em><br>\nというエラーが...</p>\n<p>その原因がわかったのでそのお話をします。</p>\n<h2>\"No module\"エラーの発生!?</h2>\n<p>前述したとおり、環境の違う状態でコードを共有したわけです。</p>\n<p>確認してみると、やはりpandasのバージョンが違っていました。他の記事でも採算を話をしていますが、機械学習によく使われるライブラリたちは特段アップデートが早く、さらに大幅な変更も多い印象です。</p>\n<p>実際に起こった原因は、<strong>pickleに入れたpandasとロード先のpandasのバージョンの違い</strong>でした。</p>\n<p>実際の僕のバージョンは以下でした。</p>\n<table>\n<thead>\n<tr>\n<th>対象</th>\n<th>pandasのバージョン</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>以前のpandas</td>\n<td>0.24.2</td>\n</tr>\n<tr>\n<td>移植先のpandas</td>\n<td>0.23.1</td>\n</tr>\n</tbody>\n</table>\n<p>そのバージョンが違うと次のようなエラーが出ることがあります。</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-string\">\"No module named 'pandas.core.internals.managers'; 'pandas.core.internals' is not a package\"</span></code></pre>\n<p>上のようなモジュールがないよ！！</p>\n<p>と怒られるわけです。</p>\n<p>なので、次の解決策を示します</p>\n<ul>\n<li>再度データを作り直す</li>\n<li>前の環境を調べてinstallし直す</li>\n<li>前の環境にrequirements.txtを作成しておいて同じ環境を立てる</li>\n</ul>\n<p>次のセクションでお話をします。</p>\n<h2>再度データを作り直す</h2>\n<p>このやり方はいうまでもないですが、もう一度作り直す方法です。</p>\n<p>前の環境がわからないなど、どうしようもない時はこの方法で太刀打ちすれば良いかと思います</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> pandas <span class=\"hljs-keyword\">as</span> pd\n<span class=\"hljs-keyword\">import</span> pickle\n\ndf = pd.DataFrame()\n<span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">'sample.pickle'</span>, <span class=\"hljs-string\">'wb'</span>) <span class=\"hljs-keyword\">as</span> f:\n    pickle.load(df, f)</code></pre>\n<p>といったように、現状の環境で作り直す方法です。</p>\n<h2>前の環境を調べてinstallし直す</h2>\n<p>前の環境でのバージョンが分かっていれば入れ直せば良いでしょう。</p>\n<pre><code class=\"hljs language-bash\">$ pip install pandas==<span class=\"hljs-string\">'your pandas version'</span></code></pre>\n<p>これで特定のバージョンのpandasを入手できるはずです。</p>\n<h2>前の環境にrequirements.txtを作成しておいて同じ環境を立てる</h2>\n<p>前の環境が目の前にあるならば、以下のようにして<em>requirements.txt</em>を作成してしまえば早いでしょう。</p>\n<pre><code class=\"hljs language-bash\">$ pip freeze > requirements.txt</code></pre>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-comment\"># 新しい環境にて</span>\n$ pip install -r requirements.txt</code></pre>\n<p>これで以前と同じ環境が整うので、心配なく動くと思います。</p>\n","Title":"pickleでロードした時pandasがあるのに\"No module ~~\"で悩んだ件について","Date":"2020-09-10","Category":"Python","Tags":["Python","Pandas"],"Authors":"ゆうぼう","Slug":"pandas-nomodule","Thumbnail":"/images/thumbnails/python.jpg","Description":"Macは普段使いなので、あまり情報収集に使いたくなかったために、常時Windowsのノートパソコンを情報収集ボットとしようとしました。その時コードの共有をDropboxを用いたのですが、なぜかいくらpandasを入れても\"No module named 'pandas.core.internals.managers'; 'pandas.core.internals' is not a package\"というエラーが。。。その原因がわかったのでそのお話をします。","Published":true},"categories":["Web","JavaScript","Competition","Cloud","Linux","Python","ML","Go","SQL"],"tags":["Apache","Appium","atmaCup","AWS","CentOS7","CentOS8","Colab","conda","CSS","ffmpeg","Flask","Go","Google Colaboratory","Heroku","HTML","JavaScript","JSON","Kaggle","Linux","Mac","make","map","MeCab","ML","MySQL","NLP","node.js","Pandas","Python","pytorch-lightning","Scikit-learn","Selenium","subprocess","tensorflow","Tkinter","zsh","オブジェクト指向","デコレータ","データ分析","特殊メソッド"]},"__N_SSG":true}