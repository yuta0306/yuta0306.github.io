{"pageProps":{"postData":{"contentHtml":"<p>最近Node.jsで開発をしていなくてバージョンを放置していたのですが，久々にNodeを使った開発の機運が高まったのでNodeとnpmのバージョンを更新しようと思ったのですが．</p>\n<p><code>Cannot find module 'agentkeepalive'</code>と出て上手くいかず．対処法は簡単だったのですが，備忘録として残します．</p>\n<h2>npmをupgradeする</h2>\n<p>とりあえず<code>npm@8.13.2</code>へupgradeします．</p>\n<pre><code class=\"hljs language-js\">npm install -g npm@<span class=\"hljs-number\">8.13</span><span class=\"hljs-number\">.2</span>\n\nnpm <span class=\"hljs-variable constant_\">WARN</span> <span class=\"hljs-variable constant_\">EBADENGINE</span> <span class=\"hljs-title class_\">Unsupported</span> engine {\nnpm <span class=\"hljs-variable constant_\">WARN</span> <span class=\"hljs-variable constant_\">EBADENGINE</span>   <span class=\"hljs-attr\">package</span>: <span class=\"hljs-string\">'npm@8.13.2'</span>,\nnpm <span class=\"hljs-variable constant_\">WARN</span> <span class=\"hljs-variable constant_\">EBADENGINE</span>   <span class=\"hljs-attr\">required</span>: { <span class=\"hljs-attr\">node</span>: <span class=\"hljs-string\">'^12.13.0 || ^14.15.0 || >=16'</span> },\nnpm <span class=\"hljs-variable constant_\">WARN</span> <span class=\"hljs-variable constant_\">EBADENGINE</span>   <span class=\"hljs-attr\">current</span>: { <span class=\"hljs-attr\">node</span>: <span class=\"hljs-string\">'v14.0.0'</span>, <span class=\"hljs-attr\">npm</span>: <span class=\"hljs-string\">'7.10.0'</span> }\nnpm <span class=\"hljs-variable constant_\">WARN</span> <span class=\"hljs-variable constant_\">EBADENGINE</span> }\nnpm <span class=\"hljs-variable constant_\">ERR</span>! code <span class=\"hljs-variable constant_\">MODULE_NOT_FOUND</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! <span class=\"hljs-title class_\">Cannot</span> find <span class=\"hljs-variable language_\">module</span> <span class=\"hljs-string\">'agentkeepalive'</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! <span class=\"hljs-title class_\">Require</span> <span class=\"hljs-attr\">stack</span>:\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/make-fetch-happen/agent.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/make-fetch-happen/index.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/npm-registry-fetch/index.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/pacote/lib/remote.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/pacote/lib/git.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/pacote/lib/fetcher.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/pacote/lib/index.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/lib/utils/update-notifier.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/lib/cli.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable constant_\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/bin/npm-cli.<span class=\"hljs-property\">js</span>\n</code></pre>\n<p><code>Cannot find module 'agentkeepalive'</code>とのことで，agentkeepaliveというモジュールが存在しないせいでupgradeできないらしいです．</p>\n<h2>globalで<code>agentkeepalive</code>をinstallする</h2>\n<p>足りない<code>agentkeepalive</code>モジュールをインストールします</p>\n<pre><code class=\"hljs language-js\">npm install -g agentkeepalive --save\n</code></pre>\n<p>一応Nodeのバージョンが16以上じゃないとwarningが出るので，NodeのバージョンもLTSかlatestまであげていた方が無難なんですかね．</p>\n<h2>もう一回npmのupgradeを試みる</h2>\n<pre><code class=\"hljs language-js\">npm install -g npm@<span class=\"hljs-number\">8.13</span><span class=\"hljs-number\">.2</span>           \n\nremoved <span class=\"hljs-number\">68</span> packages, changed <span class=\"hljs-number\">13</span> packages, and audited <span class=\"hljs-number\">202</span> packages <span class=\"hljs-keyword\">in</span> 3s\n\n<span class=\"hljs-number\">11</span> packages are looking <span class=\"hljs-keyword\">for</span> funding\n  run <span class=\"hljs-string\">`npm fund`</span> <span class=\"hljs-keyword\">for</span> details\n\nfound <span class=\"hljs-number\">0</span> vulnerabilities\n</code></pre>\n<p>これでエラーは出ずに無事にupgradeできるはずです．</p>\n<h2>まとめ</h2>\n<p>npmのupgrade時に，<code>npm ERR! Cannot find module 'agentkeepalive'</code>が出たら，以下の手順を踏んでやります．</p>\n<ol>\n<li><code>npm install -g agentkeepalive --save</code></li>\n<li><code>npm install -g npm@8.13.2 </code></li>\n</ol>\n<p>これで多分いけるはずです．</p>\n<p>久々のブログ更新，久々のNode開発．楽しみたいと思います．</p>","Title":"npm@8.13.2へのupgradeでCannot find module 'agentkeepalive'","Date":"2022-07-10","Category":"JavaScript","Tags":["npm","Node","JavaScript"],"Authors":"ゆうぼう","Slug":"npm-upgrade-to-v8-error","Thumbnail":"/images/thumbnails/js.png","Description":"最近Node.jsで開発をしていなくてバージョンを放置していたのですが，久々にNodeを使った開発の機運が高まったのでNodeとnpmのバージョンを更新しようと思ったのですが．`Cannot find module 'agentkeepalive'`と出て上手くいかず．対処法は簡単だったのですが，備忘録として．","Published":true},"categories":["論文","Web","JavaScript","Competition","Cloud","Python","Linux","ML","Go","SQL"],"tags":["Apache","Appium","atmaCup","AWS","brew","CentOS7","CentOS8","Colab","COMET","commonsense","conda","Contrasive Learning","Contrastive Learning","CSS","Demo","Dialogue Structure Learning","dialogue system","DST","Emotion Recognition","empathetic dialogue system","encyclopedic","Error Correction","ESPNet","ffmpeg","Flask","Gating Mechanism","Go","Google Colaboratory","Heroku","Highway Transformer","HTML","humor detection","Intent Classification","Internet-Augmented","JavaScript","JSON","Kaggle","KC-Net","knowledge-base","Knowledge-Intensive NLP","laughter","Linux","LLM","Mac","make","map","MeCab","mental health","mental state knowledge","mentalisation","MentalRoBERTa","Merging Models","ML","Model Editing","Model Patching","MT","Multi-Hop Transformer","multi-modal","MySQL","NLG","NLI","NLP","Node","node.js","npm","Pandas","persona","PLMKE","Poetry","Prompt-Tuning","Python","Pytorch","pytorch-lightning","Scikit-learn","Selenium","Self-Dependency-Units (SDU)","shared laughter","SISR","SLU","Speech Disfluency","subprocess","Super-Resolution","survey","tensorflow","Tkinter","Transfer Learning","transformer","Weight Interpolation","zsh","オブジェクト指向","デコレータ","データ分析","特殊メソッド","聞き手反応","超解像"]},"__N_SSG":true}