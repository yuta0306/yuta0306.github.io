{"pageProps":{"postData":{"contentHtml":"<p>MySQLのデータベースを扱う際に、Pythonスクリプトから接続したくなったので、Pythonからの接続方法を紹介します。</p>\n<h2>mysql-connector-pythonのインストール</h2>\n<p>まずは、mysql-connector-pythonのインストールを行っていきます。</p>\n<p>今回は、pipを使ってインストールしていきます。</p>\n<pre><code class=\"hljs language-bash\">$~ pip install mysql-connector-python\n</code></pre>\n<p>これでエラーが出ずに進めばインストールできているはずです。とりあえずこれで準備は完了。</p>\n<h2>まずはconnectorをインポート</h2>\n<p>まずは接続するためのメソッドをインポートしないと使えないので、インポートしましょう。</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> mysql.connector\n</code></pre>\n<p>これで準備はOK!!</p>\n<h2>接続と切断</h2>\n<p>それではここまで完成できていれば、あとは接続の処理を書くだけです。</p>\n<p>今回の例では、以下の情報を前提にしてみます。</p>\n<table>\n<thead>\n<tr>\n<th>user</th>\n<th>host</th>\n<th>password</th>\n<th>database</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>root</td>\n<td>127.0.0.1</td>\n<td>**********</td>\n<td>example</td>\n</tr>\n</tbody>\n</table>\n<p>さて、早速接続の処理を書いてみましょう。</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> mysql.connectorcnx = mysql.connecor.connect(\n        user=<span class=\"hljs-string\">'root'</span>,\n        host=<span class=\"hljs-string\">'127.0.0.1'</span>,\n        password=<span class=\"hljs-string\">'**********'</span>,\n        database=<span class=\"hljs-string\">'example'</span>,\n    )\n</code></pre>\n<p>これだけで接続は完了です。（パスワード等が全て正しければ）</p>\n<p>他の処理等も終わったら、しっかり切断しておきましょう。</p>\n<pre><code class=\"hljs language-python\">    cnx.close()\n</code></pre>\n<p>これで接続と切断の処理は完了です。</p>\n<p>また、hostが127.0.0.1であることは、他のポートとぶつかっているために人為的にローカルホストやポート番号を変えていなければ、デフォルトの位置になっているはずなので、以下でも実行可能です。</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> mysql.connectorcnx = mysql.connecor.connect(\n        user=<span class=\"hljs-string\">'root'</span>,\n        host=<span class=\"hljs-string\">'127.0.0.1'</span>,\n        password=<span class=\"hljs-string\">'**********'</span>,\n        database=<span class=\"hljs-string\">'example'</span>,\n    cnx = mysql.connecor.connect(\n        user=<span class=\"hljs-string\">'root'</span>,\n        password=<span class=\"hljs-string\">'**********'</span>,\n        database=<span class=\"hljs-string\">'example'</span>,\n    )\n</code></pre>\n<h2>connectの引数の内容を辞書にまとめておく</h2>\n<p>先ほど、引数に入力した情報を辞書にまとめて接続することもできます。\n以下のようなスクリプトになります。</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> mysql.connector\n\n    config = {\n        user: <span class=\"hljs-string\">'root'</span>,\n        host: <span class=\"hljs-string\">'127.0.0.1'</span>,\n        password: <span class=\"hljs-string\">'**********'</span>,\n        database: <span class=\"hljs-string\">'example'</span>,\n    }\n    cnx = mysql.connector.connect(**config)\n\n    cnx.close()\n</code></pre>\n<p>configは辞書型なので、「**」でアンパックすることも忘れないようにしましょう。</p>\n<h2>まとめ</h2>\n<p>最終的にまとめると、流れはこんな感じです。</p>\n<h2>#辞書使わない</h2>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> mysql.connector\n\ncnx = mysql.connecor.connect(\n    user=&#x3C;span <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"strings\"</span>><span class=\"hljs-string\">'root'</span>,\n    host=&#x3C;span <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"strings\"</span>><span class=\"hljs-string\">'127.0.0.1'</span>,\n    password=&#x3C;span <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"strings\"</span>><span class=\"hljs-string\">'**********'</span>,\n    database=&#x3C;span <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"strings\"</span>><span class=\"hljs-string\">'example'</span>,\n)\n\ncnx.close()\n</code></pre>\n<h2>#辞書型</h2>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> mysql.connector\n\nconfig = {\n    user: &#x3C;span <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"strings\"</span>><span class=\"hljs-string\">'root'</span>,\n    host: &#x3C;span <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"strings\"</span>><span class=\"hljs-string\">'127.0.0.1'</span>,\n    password: &#x3C;span <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"strings\"</span>><span class=\"hljs-string\">'**********'</span>,\n    database: &#x3C;span <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"strings\"</span>><span class=\"hljs-string\">'example'</span>,\n}\ncnx = mysql.connector.connect(**config)\n\ncnx.close()\n</code></pre>\n<p>後ほど、テーブルを実際に作ったり、インサートしたりの方法を紹介しようと思います。</p>","Title":"mysql-connector-pythonでローカルDBに接続する","Date":"2020-07-13","Category":"Python","Tags":["MySQL","Python"],"Authors":"ゆうぼう","Slug":"connect-to-mysql-python","Thumbnail":"/images/thumbnails/database.jpg","Description":"Pythonのライブラリ「mysql-connector-python」を使って、ローカルのMySQLデータベースに接続します。","Published":true},"categories":["論文","Web","JavaScript","Competition","Cloud","Linux","Python","ML","Go","SQL"],"tags":["Apache","Appium","atmaCup","AWS","CentOS7","CentOS8","Colab","COMET","commonsense","conda","Contrasive Learning","Contrastive Learning","CSS","Dialogue Structure Learning","dialogue system","DST","empathetic dialogue system","encyclopedic","ESPNet","ffmpeg","Flask","Gating Mechanism","Go","Google Colaboratory","Heroku","Highway Transformer","HTML","humor detection","Internet-Augmented","JavaScript","JSON","Kaggle","KC-Net","knowledge-base","Knowledge-Intensive NLP","laughter","Linux","Mac","make","map","MeCab","mental health","mental state knowledge","mentalisation","MentalRoBERTa","Merging Models","ML","Model Editing","Model Patching","MT","Multi-Hop Transformer","multi-modal","MySQL","NLG","NLI","NLP","Node","node.js","npm","Pandas","persona","PLMKE","Poetry","Prompt-Tuning","Python","Pytorch","pytorch-lightning","Scikit-learn","Selenium","Self-Dependency-Units (SDU)","shared laughter","SISR","Speech Disfluency","subprocess","Super-Resolution","survey","tensorflow","Tkinter","Transfer Learning","transformer","Weight Interpolation","zsh","オブジェクト指向","デコレータ","データ分析","特殊メソッド","聞き手反応","超解像"]},"__N_SSG":true}