{"pageProps":{"TaggedPostData":[{"contentHtml":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/katex@0.15.0/dist/katex.min.css\">\n</head>\n<body>\n<p>最近Node.jsで開発をしていなくてバージョンを放置していたのですが，久々にNodeを使った開発の機運が高まったのでNodeとnpmのバージョンを更新しようと思ったのですが．</p>\n<p><code>Cannot find module 'agentkeepalive'</code>と出て上手くいかず．対処法は簡単だったのですが，備忘録として残します．</p>\n<h2>npmをupgradeする</h2>\n<p>とりあえず<code>npm@8.13.2</code>へupgradeします．</p>\n<pre><code class=\"hljs language-js\">npm install -g npm@<span class=\"hljs-number\">8.13</span><span class=\"hljs-number\">.2</span>\n\nnpm <span class=\"hljs-variable hljs-constant\">WARN</span> <span class=\"hljs-variable hljs-constant\">EBADENGINE</span> <span class=\"hljs-title hljs-class\">Unsupported</span> engine {\nnpm <span class=\"hljs-variable hljs-constant\">WARN</span> <span class=\"hljs-variable hljs-constant\">EBADENGINE</span>   <span class=\"hljs-attr\">package</span>: <span class=\"hljs-string\">'npm@8.13.2'</span>,\nnpm <span class=\"hljs-variable hljs-constant\">WARN</span> <span class=\"hljs-variable hljs-constant\">EBADENGINE</span>   <span class=\"hljs-attr\">required</span>: { <span class=\"hljs-attr\">node</span>: <span class=\"hljs-string\">'^12.13.0 || ^14.15.0 || >=16'</span> },\nnpm <span class=\"hljs-variable hljs-constant\">WARN</span> <span class=\"hljs-variable hljs-constant\">EBADENGINE</span>   <span class=\"hljs-attr\">current</span>: { <span class=\"hljs-attr\">node</span>: <span class=\"hljs-string\">'v14.0.0'</span>, <span class=\"hljs-attr\">npm</span>: <span class=\"hljs-string\">'7.10.0'</span> }\nnpm <span class=\"hljs-variable hljs-constant\">WARN</span> <span class=\"hljs-variable hljs-constant\">EBADENGINE</span> }\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! code <span class=\"hljs-variable hljs-constant\">MODULE_NOT_FOUND</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! <span class=\"hljs-title hljs-class\">Cannot</span> find <span class=\"hljs-variable hljs-language\">module</span> <span class=\"hljs-string\">'agentkeepalive'</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! <span class=\"hljs-title hljs-class\">Require</span> <span class=\"hljs-attr\">stack</span>:\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/make-fetch-happen/agent.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/make-fetch-happen/index.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/npm-registry-fetch/index.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/pacote/lib/remote.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/pacote/lib/git.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/pacote/lib/fetcher.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/node_modules/pacote/lib/index.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/lib/utils/update-notifier.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/lib/cli.<span class=\"hljs-property\">js</span>\nnpm <span class=\"hljs-variable hljs-constant\">ERR</span>! - <span class=\"hljs-regexp\">/usr/</span>local/lib/node_modules/npm/bin/npm-cli.<span class=\"hljs-property\">js</span>\n</code></pre>\n<p><code>Cannot find module 'agentkeepalive'</code>とのことで，agentkeepaliveというモジュールが存在しないせいでupgradeできないらしいです．</p>\n<h2>globalで<code>agentkeepalive</code>をinstallする</h2>\n<p>足りない<code>agentkeepalive</code>モジュールをインストールします</p>\n<pre><code class=\"hljs language-js\">npm install -g agentkeepalive --save\n</code></pre>\n<p>一応Nodeのバージョンが16以上じゃないとwarningが出るので，NodeのバージョンもLTSかlatestまであげていた方が無難なんですかね．</p>\n<h2>もう一回npmのupgradeを試みる</h2>\n<pre><code class=\"hljs language-js\">npm install -g npm@<span class=\"hljs-number\">8.13</span><span class=\"hljs-number\">.2</span>           \n\nremoved <span class=\"hljs-number\">68</span> packages, changed <span class=\"hljs-number\">13</span> packages, and audited <span class=\"hljs-number\">202</span> packages <span class=\"hljs-keyword\">in</span> 3s\n\n<span class=\"hljs-number\">11</span> packages are looking <span class=\"hljs-keyword\">for</span> funding\n  run <span class=\"hljs-string\">`npm fund`</span> <span class=\"hljs-keyword\">for</span> details\n\nfound <span class=\"hljs-number\">0</span> vulnerabilities\n</code></pre>\n<p>これでエラーは出ずに無事にupgradeできるはずです．</p>\n<h2>まとめ</h2>\n<p>npmのupgrade時に，<code>npm ERR! Cannot find module 'agentkeepalive'</code>が出たら，以下の手順を踏んでやります．</p>\n<ol>\n<li><code>npm install -g agentkeepalive --save</code></li>\n<li><code>npm install -g npm@8.13.2 </code></li>\n</ol>\n<p>これで多分いけるはずです．</p>\n<p>久々のブログ更新，久々のNode開発．楽しみたいと思います．</p>\n</body>\n</html>\n","Title":"npm@8.13.2へのupgradeでCannot find module 'agentkeepalive'","Date":"2022-07-10","Category":"JavaScript","Tags":["npm","Node","JavaScript"],"Authors":"ゆうぼう","Slug":"npm-upgrade-to-v8-error","Thumbnail":"/images/thumbnails/js.png","Description":"最近Node.jsで開発をしていなくてバージョンを放置していたのですが，久々にNodeを使った開発の機運が高まったのでNodeとnpmのバージョンを更新しようと思ったのですが．`Cannot find module 'agentkeepalive'`と出て上手くいかず．対処法は簡単だったのですが，備忘録として．","Published":true}],"tag":"npm","categories":["Web","JavaScript","Competition","Cloud","Linux","Python","ML","Go","SQL"],"tags":["Apache","Appium","atmaCup","AWS","CentOS7","CentOS8","Colab","conda","CSS","ffmpeg","Flask","Go","Google Colaboratory","Heroku","HTML","JavaScript","JSON","Kaggle","Linux","Mac","make","map","MeCab","ML","MySQL","NLP","Node","node.js","npm","Pandas","Python","Pytorch","pytorch-lightning","Scikit-learn","Selenium","SISR","subprocess","Super-Resolution","tensorflow","Tkinter","zsh","オブジェクト指向","デコレータ","データ分析","特殊メソッド","超解像"],"pages":1,"page":1},"__N_SSG":true}